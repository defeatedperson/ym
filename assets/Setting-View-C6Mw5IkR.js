import{T as qs}from"./Top-Menu-DQ5GjE78.js";import{_ as jt,B as zs,F as Us}from"./Back-Ground-DNITIm_t.js";import{r as ot,l as ee,m as Ee,D as bt,b as U,e as u,G as $e,w as Bt,c as j,d as V,A as At,t as Z,j as tt,T as qe,E as W,H as wt,I as Fs,o as Gn,n as nn,i as Ls,J as js,B as Vs,K as Hs,h as He,F as Js}from"./index-3rvIzVhp.js";import{v as Qs}from"./validator-HyY_18Og.js";const Ys={class:"modal-body"},Gs={class:"form-group"},Ks={key:0,class:"error-message"},Ws={class:"form-group"},Xs={key:0,class:"error-message"},Zs={class:"form-group"},tr={key:0,class:"error-message"},er={class:"modal-footer"},nr=["disabled"],sr={key:0,class:"fas fa-spinner fa-spin"},rr={__name:"PasswordUpdateDialog",emits:["close","success"],setup(t,{emit:e}){const n=e,s=ot(!1),r=ee({currentPassword:"",newPassword:"",confirmPassword:""}),o=ee({currentPassword:"",newPassword:"",confirmPassword:""}),i=d=>{const f=r[d];switch(d){case"currentPassword":{f.trim()?o[d]="":o[d]="请输入当前密码";break}case"newPassword":{const v=Qs(f);o[d]=v.valid?"":v.message,r.confirmPassword&&i("confirmPassword");break}case"confirmPassword":{f.trim()?f!==r.newPassword?o[d]="两次输入的密码不一致":o[d]="":o[d]="请确认新密码";break}}},a=d=>{o[d]&&(o[d]="")},c=Ee(()=>{const d=r.currentPassword&&r.newPassword&&r.confirmPassword,f=!Object.values(o).some(v=>v!=="");return d&&f}),S=async()=>{if(Object.keys(r).forEach(d=>{i(d)}),!c.value){W.error("请检查输入内容");return}s.value=!0;try{const d=await wt("/api/auth/account-settings-api.php","update_password",{old_password:r.currentPassword,new_password:r.newPassword});d.status==="ok"?(W.success(d.message||"密码修改成功"),n("success"),y()):d.message&&d.message.includes("旧密码验证失败")?W.error("旧密码错误，无法修改密码"):W.error(d.message||"密码修改失败")}catch(d){console.error("密码修改失败:",d),W.error("密码修改失败")}finally{s.value=!1}},y=()=>{n("close")};return(d,f)=>(U(),bt(qe,{to:"body"},[u("div",{class:"modal-overlay",onClick:y},[u("div",{class:"modal-content",onClick:f[9]||(f[9]=$e(()=>{},["stop"]))},[u("div",{class:"modal-header"},[f[11]||(f[11]=u("h3",null,"修改密码",-1)),u("button",{class:"modal-close",onClick:y},f[10]||(f[10]=[u("i",{class:"fas fa-times"},null,-1)]))]),u("div",Ys,[u("div",Gs,[f[12]||(f[12]=u("label",{class:"form-label"},"当前密码",-1)),Bt(u("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>r.currentPassword=v),type:"password",class:"form-input",placeholder:"请输入当前密码",onBlur:f[1]||(f[1]=v=>i("currentPassword")),onInput:f[2]||(f[2]=v=>a("currentPassword"))},null,544),[[At,r.currentPassword]]),o.currentPassword?(U(),j("div",Ks,Z(o.currentPassword),1)):V("",!0)]),u("div",Ws,[f[13]||(f[13]=u("label",{class:"form-label"},"新密码",-1)),Bt(u("input",{"onUpdate:modelValue":f[3]||(f[3]=v=>r.newPassword=v),type:"password",class:"form-input",placeholder:"请输入新密码（8-32位）",onBlur:f[4]||(f[4]=v=>i("newPassword")),onInput:f[5]||(f[5]=v=>a("newPassword"))},null,544),[[At,r.newPassword]]),o.newPassword?(U(),j("div",Xs,Z(o.newPassword),1)):V("",!0)]),u("div",Zs,[f[14]||(f[14]=u("label",{class:"form-label"},"确认新密码",-1)),Bt(u("input",{"onUpdate:modelValue":f[6]||(f[6]=v=>r.confirmPassword=v),type:"password",class:"form-input",placeholder:"请再次输入新密码",onBlur:f[7]||(f[7]=v=>i("confirmPassword")),onInput:f[8]||(f[8]=v=>a("confirmPassword"))},null,544),[[At,r.confirmPassword]]),o.confirmPassword?(U(),j("div",tr,Z(o.confirmPassword),1)):V("",!0)])]),u("div",er,[u("button",{class:"modal-btn secondary",onClick:y},"取消"),u("button",{class:"modal-btn primary",disabled:!c.value||s.value,onClick:S},[s.value?(U(),j("i",sr)):V("",!0),tt(" "+Z(s.value?"修改中...":"确认修改"),1)],8,nr)])])])]))}},or=jt(rr,[["__scopeId","data-v-887d34c5"]]),ir={class:"modal-body"},ar={key:0,class:"current-info"},lr={class:"info-value"},cr={class:"form-group"},ur={key:0,class:"error-message"},dr={class:"modal-footer"},fr=["disabled"],hr={key:0,class:"loading-spinner"},gr={__name:"EmailUpdateDialog",props:{currentEmail:{type:String,default:""}},emits:["close","success"],setup(t,{emit:e}){const n=t,s=e,r=ot(!1),o=ee({newEmail:""}),i=ee({newEmail:""}),a=f=>{const v=o[f];switch(f){case"newEmail":v.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v)?v===n.currentEmail?i[f]="新邮箱不能与当前邮箱相同":i[f]="":i[f]="请输入有效的邮箱地址":i[f]="请输入新邮箱地址";break}},c=f=>{i[f]&&(i[f]="")},S=Ee(()=>{const f=o.newEmail,v=!Object.values(i).some(B=>B!=="");return f&&v}),y=async()=>{if(Object.keys(o).forEach(f=>{a(f)}),!S.value){W.error("请检查输入内容");return}r.value=!0;try{const f=await wt("/api/auth/account-settings-api.php","update_email",{new_email:o.newEmail});f.status==="ok"?(W.success(f.message||"邮箱修改成功"),s("success"),d()):W.error(f.message||"邮箱修改失败")}catch(f){console.error("邮箱修改失败:",f),W.error("邮箱修改失败")}finally{r.value=!1}},d=()=>{s("close")};return(f,v)=>(U(),bt(qe,{to:"body"},[u("div",{class:"modal-overlay",onClick:d},[u("div",{class:"modal-content",onClick:v[3]||(v[3]=$e(()=>{},["stop"]))},[u("div",{class:"modal-header"},[v[5]||(v[5]=u("h3",{class:"modal-title"},"修改邮箱",-1)),u("button",{class:"modal-close",onClick:d},v[4]||(v[4]=[u("i",{class:"fas fa-times"},null,-1)]))]),u("div",ir,[t.currentEmail?(U(),j("div",ar,[v[6]||(v[6]=u("label",{class:"info-label"},"当前邮箱",-1)),u("div",lr,Z(t.currentEmail),1)])):V("",!0),u("div",cr,[v[7]||(v[7]=u("label",{class:"form-label"},"新邮箱",-1)),Bt(u("input",{"onUpdate:modelValue":v[0]||(v[0]=B=>o.newEmail=B),type:"email",class:"form-input",placeholder:"请输入新邮箱地址",onBlur:v[1]||(v[1]=B=>a("newEmail")),onInput:v[2]||(v[2]=B=>c("newEmail"))},null,544),[[At,o.newEmail]]),i.newEmail?(U(),j("div",ur,Z(i.newEmail),1)):V("",!0)])]),u("div",dr,[u("button",{class:"modal-btn secondary",onClick:d},"取消"),u("button",{class:"modal-btn primary",disabled:!S.value||r.value,onClick:y},[r.value?(U(),j("span",hr)):V("",!0),tt(" "+Z(r.value?"修改中...":"确认修改"),1)],8,fr)])])])]))}},pr=jt(gr,[["__scopeId","data-v-04d5a06f"]]);var vr=Object.defineProperty,mr=(t,e,n)=>e in t?vr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ct=(t,e,n)=>(mr(t,typeof e!="symbol"?e+"":e,n),n);/**
* @vue/shared v3.5.3
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function yr(t,e){const n=new Set(t.split(","));return s=>n.has(s)}const fn={},br=[],Pt=()=>{},wr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),$t=Object.assign,_r=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},xr=Object.prototype.hasOwnProperty,sn=(t,e)=>xr.call(t,e),H=Array.isArray,Kt=t=>ze(t)==="[object Map]",Kn=t=>ze(t)==="[object Set]",J=t=>typeof t=="function",kt=t=>typeof t=="string",Vt=t=>typeof t=="symbol",it=t=>t!==null&&typeof t=="object",Wn=t=>(it(t)||J(t))&&J(t.then)&&J(t.catch),Xn=Object.prototype.toString,ze=t=>Xn.call(t),kr=t=>ze(t).slice(8,-1),Zn=t=>ze(t)==="[object Object]",hn=t=>kt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Lt=(t,e)=>!Object.is(t,e),Cr=t=>{const e=kt(t)?Number(t):NaN;return isNaN(e)?t:e};let In;const Sr=()=>In||(In=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gn(t){if(H(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=kt(s)?Or(s):gn(s);if(r)for(const o in r)e[o]=r[o]}return e}else if(kt(t)||it(t))return t}const Mr=/;(?![^(]*\))/g,Dr=/:([^]+)/,Pr=/\/\*[^]*?\*\//g;function Or(t){const e={};return t.replace(Pr,"").split(Mr).forEach(n=>{if(n){const s=n.split(Dr);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Wt(t){let e="";if(kt(t))e=t;else if(H(t))for(let n=0;n<t.length;n++){const s=Wt(t[n]);s&&(e+=s+" ")}else if(it(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ts=t=>!!(t&&t.__v_isRef===!0),es=t=>kt(t)?t:t==null?"":H(t)||it(t)&&(t.toString===Xn||!J(t.toString))?ts(t)?es(t.value):JSON.stringify(t,ns,2):String(t),ns=(t,e)=>ts(e)?ns(t,e.value):Kt(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],o)=>(n[Je(s,o)+" =>"]=r,n),{})}:Kn(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Je(n))}:Vt(e)?Je(e):it(e)&&!H(e)&&!Zn(e)?String(e):e,Je=(t,e="")=>{var n;return Vt(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Q;const Qe=new WeakSet;class Tr{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qe.has(this)&&(Qe.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=ae,ae=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Rn(this),rs(this);const e=Q,n=xt;Q=this,xt=!0;try{return this.fn()}finally{os(this),Q=e,xt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)mn(e);this.deps=this.depsTail=void 0,Rn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qe.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rn(this)&&this.run()}get dirty(){return rn(this)}}let ss=0,ae;function pn(){ss++}function vn(){if(--ss>0)return;let t;for(;ae;){let e=ae;for(ae=void 0;e;){const n=e.nextEffect;if(e.nextEffect=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function rs(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function os(t){let e,n=t.depsTail;for(let s=n;s;s=s.prevDep)s.version===-1?(s===n&&(n=s.prevDep),mn(s),Ir(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0;t.deps=e,t.depsTail=n}function rn(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&is(e.dep.computed)===!1||e.dep.version!==e.version)return!0;return!!t._dirty}function is(t){if(t.flags&2)return!1;if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ce))return;t.globalVersion=ce;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&!rn(t)){t.flags&=-3;return}const n=Q,s=xt;Q=t,xt=!0;try{rs(t);const r=t.fn(t._value);(e.version===0||Lt(r,t._value))&&(t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Q=n,xt=s,os(t),t.flags&=-3}}function mn(t){const{dep:e,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),e.subs===t&&(e.subs=n),!e.subs&&e.computed){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)mn(r)}}function Ir(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let xt=!0;const as=[];function he(){as.push(xt),xt=!1}function ge(){const t=as.pop();xt=t===void 0?!0:t}function Rn(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Q;Q=void 0;try{e()}finally{Q=n}}}let ce=0;class ls{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0}track(e){if(!Q||!xt||Q===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Q)n=this.activeLink={dep:this,sub:Q,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},Q.deps?(n.prevDep=Q.depsTail,Q.depsTail.nextDep=n,Q.depsTail=n):Q.deps=Q.depsTail=n,Q.flags&4&&cs(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Q.depsTail,n.nextDep=void 0,Q.depsTail.nextDep=n,Q.depsTail=n,Q.deps===n&&(Q.deps=s)}return n}trigger(e){this.version++,ce++,this.notify(e)}notify(e){pn();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()}finally{vn()}}}function cs(t){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)cs(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}const on=new WeakMap,Ft=Symbol(""),an=Symbol(""),ue=Symbol("");function dt(t,e,n){if(xt&&Q){let s=on.get(t);s||on.set(t,s=new Map);let r=s.get(n);r||s.set(n,r=new ls),r.track()}}function Nt(t,e,n,s,r,o){const i=on.get(t);if(!i){ce++;return}let a=[];if(e==="clear")a=[...i.values()];else{const c=H(t),S=c&&hn(n);if(c&&n==="length"){const y=Number(s);i.forEach((d,f)=>{(f==="length"||f===ue||!Vt(f)&&f>=y)&&a.push(d)})}else{const y=d=>d&&a.push(d);switch(n!==void 0&&y(i.get(n)),S&&y(i.get(ue)),e){case"add":c?S&&y(i.get("length")):(y(i.get(Ft)),Kt(t)&&y(i.get(an)));break;case"delete":c||(y(i.get(Ft)),Kt(t)&&y(i.get(an)));break;case"set":Kt(t)&&y(i.get(Ft));break}}}pn();for(const c of a)c.trigger();vn()}function Qt(t){const e=K(t);return e===t?e:(dt(e,"iterate",ue),Ct(t)?e:e.map(ht))}function yn(t){return dt(t=K(t),"iterate",ue),t}const Rr={__proto__:null,[Symbol.iterator](){return Ye(this,Symbol.iterator,ht)},concat(...t){return Qt(this).concat(...t.map(e=>H(e)?Qt(e):e))},entries(){return Ye(this,"entries",t=>(t[1]=ht(t[1]),t))},every(t,e){return Mt(this,"every",t,e,void 0,arguments)},filter(t,e){return Mt(this,"filter",t,e,n=>n.map(ht),arguments)},find(t,e){return Mt(this,"find",t,e,ht,arguments)},findIndex(t,e){return Mt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Mt(this,"findLast",t,e,ht,arguments)},findLastIndex(t,e){return Mt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Mt(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ge(this,"includes",t)},indexOf(...t){return Ge(this,"indexOf",t)},join(t){return Qt(this).join(t)},lastIndexOf(...t){return Ge(this,"lastIndexOf",t)},map(t,e){return Mt(this,"map",t,e,void 0,arguments)},pop(){return oe(this,"pop")},push(...t){return oe(this,"push",t)},reduce(t,...e){return Bn(this,"reduce",t,e)},reduceRight(t,...e){return Bn(this,"reduceRight",t,e)},shift(){return oe(this,"shift")},some(t,e){return Mt(this,"some",t,e,void 0,arguments)},splice(...t){return oe(this,"splice",t)},toReversed(){return Qt(this).toReversed()},toSorted(t){return Qt(this).toSorted(t)},toSpliced(...t){return Qt(this).toSpliced(...t)},unshift(...t){return oe(this,"unshift",t)},values(){return Ye(this,"values",ht)}};function Ye(t,e,n){const s=yn(t),r=s[e]();return s!==t&&!Ct(t)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.value&&(o.value=n(o.value)),o}),r}const Br=Array.prototype;function Mt(t,e,n,s,r,o){const i=yn(t),a=i!==t&&!Ct(t),c=i[e];if(c!==Br[e]){const d=c.apply(t,o);return a?ht(d):d}let S=n;i!==t&&(a?S=function(d,f){return n.call(this,ht(d),f,t)}:n.length>2&&(S=function(d,f){return n.call(this,d,f,t)}));const y=c.call(i,S,s);return a&&r?r(y):y}function Bn(t,e,n,s){const r=yn(t);let o=n;return r!==t&&(Ct(t)?n.length>3&&(o=function(i,a,c){return n.call(this,i,a,c,t)}):o=function(i,a,c){return n.call(this,i,ht(a),c,t)}),r[e](o,...s)}function Ge(t,e,n){const s=K(t);dt(s,"iterate",ue);const r=s[e](...n);return(r===-1||r===!1)&&_n(n[0])?(n[0]=K(n[0]),s[e](...n)):r}function oe(t,e,n=[]){he(),pn();const s=K(t)[e].apply(t,n);return vn(),ge(),s}const Ar=yr("__proto__,__v_isRef,__isVue"),us=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Vt));function Nr(t){Vt(t)||(t=String(t));const e=K(this);return dt(e,"has",t),e.hasOwnProperty(t)}class ds{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){const r=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return o;if(n==="__v_raw")return s===(r?o?Yr:gs:o?Qr:hs).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const i=H(e);if(!r){let c;if(i&&(c=Rr[n]))return c;if(n==="hasOwnProperty")return Nr}const a=Reflect.get(e,n,gt(e)?e:s);return(Vt(n)?us.has(n):Ar(n))||(r||dt(e,"get",n),o)?a:gt(a)?i&&hn(n)?a:a.value:it(a)?r?ps(a):wn(a):a}}class Er extends ds{constructor(e=!1){super(!1,e)}set(e,n,s,r){let o=e[n];if(!this._isShallow){const c=ne(o);if(!Ct(s)&&!ne(s)&&(o=K(o),s=K(s)),!H(e)&&gt(o)&&!gt(s))return c?!1:(o.value=s,!0)}const i=H(e)&&hn(n)?Number(n)<e.length:sn(e,n),a=Reflect.set(e,n,s,gt(e)?e:r);return e===K(r)&&(i?Lt(s,o)&&Nt(e,"set",n,s):Nt(e,"add",n,s)),a}deleteProperty(e,n){const s=sn(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Nt(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Vt(n)||!us.has(n))&&dt(e,"has",n),s}ownKeys(e){return dt(e,"iterate",H(e)?"length":Ft),Reflect.ownKeys(e)}}class $r extends ds{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const qr=new Er,zr=new $r,bn=t=>t,Ue=t=>Reflect.getPrototypeOf(t);function ve(t,e,n=!1,s=!1){t=t.__v_raw;const r=K(t),o=K(e);n||(Lt(e,o)&&dt(r,"get",e),dt(r,"get",o));const{has:i}=Ue(r),a=s?bn:n?xn:ht;if(i.call(r,e))return a(t.get(e));if(i.call(r,o))return a(t.get(o));t!==r&&t.get(e)}function me(t,e=!1){const n=this.__v_raw,s=K(n),r=K(t);return e||(Lt(t,r)&&dt(s,"has",t),dt(s,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function ye(t,e=!1){return t=t.__v_raw,!e&&dt(K(t),"iterate",Ft),Reflect.get(t,"size",t)}function An(t,e=!1){!e&&!Ct(t)&&!ne(t)&&(t=K(t));const n=K(this);return Ue(n).has.call(n,t)||(n.add(t),Nt(n,"add",t,t)),this}function Nn(t,e,n=!1){!n&&!Ct(e)&&!ne(e)&&(e=K(e));const s=K(this),{has:r,get:o}=Ue(s);let i=r.call(s,t);i||(t=K(t),i=r.call(s,t));const a=o.call(s,t);return s.set(t,e),i?Lt(e,a)&&Nt(s,"set",t,e):Nt(s,"add",t,e),this}function En(t){const e=K(this),{has:n,get:s}=Ue(e);let r=n.call(e,t);r||(t=K(t),r=n.call(e,t)),s&&s.call(e,t);const o=e.delete(t);return r&&Nt(e,"delete",t,void 0),o}function $n(){const t=K(this),e=t.size!==0,n=t.clear();return e&&Nt(t,"clear",void 0,void 0),n}function be(t,e){return function(n,s){const r=this,o=r.__v_raw,i=K(o),a=e?bn:t?xn:ht;return!t&&dt(i,"iterate",Ft),o.forEach((c,S)=>n.call(s,a(c),a(S),r))}}function we(t,e,n){return function(...s){const r=this.__v_raw,o=K(r),i=Kt(o),a=t==="entries"||t===Symbol.iterator&&i,c=t==="keys"&&i,S=r[t](...s),y=n?bn:e?xn:ht;return!e&&dt(o,"iterate",c?an:Ft),{next(){const{value:d,done:f}=S.next();return f?{value:d,done:f}:{value:a?[y(d[0]),y(d[1])]:y(d),done:f}},[Symbol.iterator](){return this}}}}function Tt(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ur(){const t={get(r){return ve(this,r)},get size(){return ye(this)},has:me,add:An,set:Nn,delete:En,clear:$n,forEach:be(!1,!1)},e={get(r){return ve(this,r,!1,!0)},get size(){return ye(this)},has:me,add(r){return An.call(this,r,!0)},set(r,o){return Nn.call(this,r,o,!0)},delete:En,clear:$n,forEach:be(!1,!0)},n={get(r){return ve(this,r,!0)},get size(){return ye(this,!0)},has(r){return me.call(this,r,!0)},add:Tt("add"),set:Tt("set"),delete:Tt("delete"),clear:Tt("clear"),forEach:be(!0,!1)},s={get(r){return ve(this,r,!0,!0)},get size(){return ye(this,!0)},has(r){return me.call(this,r,!0)},add:Tt("add"),set:Tt("set"),delete:Tt("delete"),clear:Tt("clear"),forEach:be(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=we(r,!1,!1),n[r]=we(r,!0,!1),e[r]=we(r,!1,!0),s[r]=we(r,!0,!0)}),[t,n,e,s]}const[Fr,Lr,jr,Vr]=Ur();function fs(t,e){const n=e?t?Vr:jr:t?Lr:Fr;return(s,r,o)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(sn(n,r)&&r in s?n:s,r,o)}const Hr={get:fs(!1,!1)},Jr={get:fs(!0,!1)},hs=new WeakMap,Qr=new WeakMap,gs=new WeakMap,Yr=new WeakMap;function Gr(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kr(t){return t.__v_skip||!Object.isExtensible(t)?0:Gr(kr(t))}function wn(t){return ne(t)?t:vs(t,!1,qr,Hr,hs)}function ps(t){return vs(t,!0,zr,Jr,gs)}function vs(t,e,n,s,r){if(!it(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=r.get(t);if(o)return o;const i=Kr(t);if(i===0)return t;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function le(t){return ne(t)?le(t.__v_raw):!!(t&&t.__v_isReactive)}function ne(t){return!!(t&&t.__v_isReadonly)}function Ct(t){return!!(t&&t.__v_isShallow)}function _n(t){return t?!!t.__v_raw:!1}function K(t){const e=t&&t.__v_raw;return e?K(e):t}const ht=t=>it(t)?wn(t):t,xn=t=>it(t)?ps(t):t;function gt(t){return t?t.__v_isRef===!0:!1}function Ce(t){return gt(t)?t.value:t}const Wr={get:(t,e,n)=>e==="__v_raw"?t:Ce(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return gt(r)&&!gt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Xr(t){return le(t)?t:new Proxy(t,Wr)}class Zr{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ls(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ce-1,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){Q!==this&&(this.flags|=16,this.dep.notify())}get value(){const e=this.dep.track();return is(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function to(t,e,n=!1){let s,r;return J(t)?s=t:(s=t.get,r=t.set),new Zr(s,r,n)}const _e={},Pe=new WeakMap;let Ut;function eo(t,e=!1,n=Ut){if(n){let s=Pe.get(n);s||Pe.set(n,s=[]),s.push(t)}}function no(t,e,n=fn){const{immediate:s,deep:r,once:o,scheduler:i,augmentJob:a,call:c}=n,S=L=>r?L:Ct(L)||r===!1||r===0?Rt(L,1):Rt(L);let y,d,f,v,B=!1,I=!1;if(gt(t)?(d=()=>t.value,B=Ct(t)):le(t)?(d=()=>S(t),B=!0):H(t)?(I=!0,B=t.some(L=>le(L)||Ct(L)),d=()=>t.map(L=>{if(gt(L))return L.value;if(le(L))return S(L);if(J(L))return c?c(L,2):L()})):J(t)?e?d=c?()=>c(t,2):t:d=()=>{if(f){he();try{f()}finally{ge()}}const L=Ut;Ut=y;try{return c?c(t,3,[v]):t(v)}finally{Ut=L}}:d=Pt,e&&r){const L=d,nt=r===!0?1/0:r;d=()=>Rt(L(),nt)}const A=()=>{y.stop()};if(o)if(e){const L=e;e=(...nt)=>{L(...nt),A()}}else{const L=d;d=()=>{L(),A()}}let X=I?new Array(t.length).fill(_e):_e;const et=L=>{if(!(!(y.flags&1)||!y.dirty&&!L))if(e){const nt=y.run();if(r||B||(I?nt.some((w,T)=>Lt(w,X[T])):Lt(nt,X))){f&&f();const w=Ut;Ut=y;try{const T=[nt,X===_e?void 0:I&&X[0]===_e?[]:X,v];c?c(e,3,T):e(...T),X=nt}finally{Ut=w}}}else y.run()};return a&&a(et),y=new Tr(d),y.scheduler=i?()=>i(et,!1):et,v=L=>eo(L,!1,y),f=y.onStop=()=>{const L=Pe.get(y);if(L){if(c)c(L,4);else for(const nt of L)nt();Pe.delete(y)}},e?s?et(!0):X=y.run():i?i(et.bind(null,!0),!0):y.run(),A.pause=y.pause.bind(y),A.resume=y.resume.bind(y),A.stop=A,A}function Rt(t,e=1/0,n){if(e<=0||!it(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,gt(t))Rt(t.value,e,n);else if(H(t))for(let s=0;s<t.length;s++)Rt(t[s],e,n);else if(Kn(t)||Kt(t))t.forEach(s=>{Rt(s,e,n)});else if(Zn(t)){for(const s in t)Rt(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Rt(t[s],e,n)}return t}function kn(t,e,n,s){try{return s?t(...s):t()}catch(r){Cn(r,e,n)}}function Fe(t,e,n,s){if(J(t)){const r=kn(t,e,n,s);return r&&Wn(r)&&r.catch(o=>{Cn(o,e,n)}),r}if(H(t)){const r=[];for(let o=0;o<t.length;o++)r.push(Fe(t[o],e,n,s));return r}}function Cn(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||fn;if(e){let a=e.parent;const c=e.proxy,S=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const y=a.ec;if(y){for(let d=0;d<y.length;d++)if(y[d](t,c,S)===!1)return}a=a.parent}if(o){he(),kn(o,null,10,[t,c,S]),ge();return}}so(t,n,r,s,i)}function so(t,e,n,s=!0,r=!1){{if(r)throw t;console.error(t)}}let Oe=!1,ln=!1;const mt=[];let Dt=0;const Xt=[];let It=null,Gt=0;const ro=Promise.resolve();function oo(t){let e=Oe?Dt+1:0,n=mt.length;for(;e<n;){const s=e+n>>>1,r=mt[s],o=de(r);o<t||o===t&&r.flags&2?e=s+1:n=s}return e}function io(t){if(!(t.flags&1)){const e=de(t),n=mt[mt.length-1];!n||!(t.flags&2)&&e>=de(n)?mt.push(t):mt.splice(oo(e),0,t),t.flags|=1,ms()}}function ms(){!Oe&&!ln&&(ln=!0,ro.then(ys))}function cn(t){H(t)?Xt.push(...t):It&&t.id===-1?It.splice(Gt+1,0,t):t.flags&1||(Xt.push(t),t.flags|=1),ms()}function ao(t){if(Xt.length){const e=[...new Set(Xt)].sort((n,s)=>de(n)-de(s));if(Xt.length=0,It){It.push(...e);return}for(It=e,Gt=0;Gt<It.length;Gt++){const n=It[Gt];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}It=null,Gt=0}}const de=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ys(t){ln=!1,Oe=!0;try{for(Dt=0;Dt<mt.length;Dt++){const e=mt[Dt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),kn(e,e.i,e.i?15:14),e.flags&=-2)}}finally{for(;Dt<mt.length;Dt++){const e=mt[Dt];e&&(e.flags&=-2)}Dt=0,mt.length=0,ao(),Oe=!1,(mt.length||Xt.length)&&ys()}}let _t=null,bs=null;function qn(t){const e=_t;return _t=t,bs=t&&t.type.__scopeId||null,e}function lo(t,e=_t,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Vn(-1);const o=qn(e);let i;try{i=t(...r)}finally{qn(o),s._d&&Vn(1)}return i};return s._n=!0,s._c=!0,s._d=!0,s}const co=t=>t.__isTeleport;function ws(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ws(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function _s(t,e){return J(t)?$t({name:t.name},e,{setup:t}):t}function uo(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const fo=t=>t.type.__isKeepAlive;function ho(t,e){xs(t,"a",e)}function go(t,e){xs(t,"da",e)}function xs(t,e,n=at){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Le(e,s,n),n){let r=n.parent;for(;r&&r.parent;)fo(r.parent.vnode)&&po(s,e,n,r),r=r.parent}}function po(t,e,n,s){const r=Le(e,t,s,!0);ks(()=>{_r(s[e],r)},n)}function Le(t,e,n=at,s=!1){if(n){const r=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...i)=>{he();const a=Ae(n),c=Fe(e,n,t,i);return a(),ge(),c});return s?r.unshift(o):r.push(o),o}}const Ot=t=>(e,n=at)=>{(!je||t==="sp")&&Le(t,(...s)=>e(...s),n)},vo=Ot("bm"),mo=Ot("m"),yo=Ot("bu"),bo=Ot("u"),wo=Ot("bum"),ks=Ot("um"),_o=Ot("sp"),xo=Ot("rtg"),ko=Ot("rtc");function Co(t,e=at){Le("ec",t,e)}const So=Symbol.for("v-ndc");function zn(t){return H(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function Mo(t){const e=si();let n=t();return ri(),Wn(n)&&(n=n.catch(s=>{throw Ae(e),s})),[n,()=>Ae(e)]}function Do(t){const e=Oo(t),n=t.proxy,s=t.ctx;e.beforeCreate&&Un(e.beforeCreate,t,"bc");const{data:r,computed:o,methods:i,watch:a,provide:c,inject:S,created:y,beforeMount:d,mounted:f,beforeUpdate:v,updated:B,activated:I,deactivated:A,beforeDestroy:X,beforeUnmount:et,destroyed:L,unmounted:nt,render:w,renderTracked:T,renderTriggered:x,errorCaptured:P,serverPrefetch:g,expose:m,inheritAttrs:h,components:l,directives:M,filters:k}=e;if(S&&Po(S,s,null),i)for(const N in i){const q=i[N];J(q)&&(s[N]=q.bind(n))}if(r){const N=r.call(n,n);it(N)&&(t.data=wn(N))}if(o)for(const N in o){const q=o[N],Y=J(q)?q.bind(n,n):J(q.get)?q.get.bind(n,n):Pt,rt=!J(q)&&J(q.set)?q.set.bind(n):Pt,ft=li({get:Y,set:rt});Object.defineProperty(s,N,{enumerable:!0,configurable:!0,get:()=>ft.value,set:yt=>ft.value=yt})}if(a)for(const N in a)Cs(a[N],s,n,N);if(c){const N=J(c)?c.call(n):c;Reflect.ownKeys(N).forEach(q=>{Ao(q,N[q])})}y&&Un(y,t,"c");function E(N,q){H(q)?q.forEach(Y=>N(Y.bind(n))):q&&N(q.bind(n))}if(E(vo,d),E(mo,f),E(yo,v),E(bo,B),E(ho,I),E(go,A),E(Co,P),E(ko,T),E(xo,x),E(wo,et),E(ks,nt),E(_o,g),H(m))if(m.length){const N=t.exposed||(t.exposed={});m.forEach(q=>{Object.defineProperty(N,q,{get:()=>n[q],set:Y=>n[q]=Y})})}else t.exposed||(t.exposed={});w&&t.render===Pt&&(t.render=w),h!=null&&(t.inheritAttrs=h),l&&(t.components=l),M&&(t.directives=M),g&&uo(t)}function Po(t,e,n=Pt){H(t)&&(t=un(t));for(const s in t){const r=t[s];let o;it(r)?"default"in r?o=Se(r.from||s,r.default,!0):o=Se(r.from||s):o=Se(r),gt(o)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):e[s]=o}}function Un(t,e,n){Fe(H(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Cs(t,e,n,s){let r=s.includes(".")?Uo(n,s):()=>n[s];if(kt(t)){const o=e[t];J(o)&&Ke(r,o)}else if(J(t))Ke(r,t.bind(n));else if(it(t))if(H(t))t.forEach(o=>Cs(o,e,n,s));else{const o=J(t.handler)?t.handler.bind(n):e[t.handler];J(o)&&Ke(r,o,t)}}function Oo(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:o,config:{optionMergeStrategies:i}}=t.appContext,a=o.get(e);let c;return a?c=a:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(S=>Te(c,S,i,!0)),Te(c,e,i)),it(e)&&o.set(e,c),c}function Te(t,e,n,s=!1){const{mixins:r,extends:o}=e;o&&Te(t,o,n,!0),r&&r.forEach(i=>Te(t,i,n,!0));for(const i in e)if(!(s&&i==="expose")){const a=To[i]||n&&n[i];t[i]=a?a(t[i],e[i]):e[i]}return t}const To={data:Fn,props:Ln,emits:Ln,methods:ie,computed:ie,beforeCreate:lt,created:lt,beforeMount:lt,mounted:lt,beforeUpdate:lt,updated:lt,beforeDestroy:lt,beforeUnmount:lt,destroyed:lt,unmounted:lt,activated:lt,deactivated:lt,errorCaptured:lt,serverPrefetch:lt,components:ie,directives:ie,watch:Ro,provide:Fn,inject:Io};function Fn(t,e){return e?t?function(){return $t(J(t)?t.call(this,this):t,J(e)?e.call(this,this):e)}:e:t}function Io(t,e){return ie(un(t),un(e))}function un(t){if(H(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function lt(t,e){return t?[...new Set([].concat(t,e))]:e}function ie(t,e){return t?$t(Object.create(null),t,e):e}function Ln(t,e){return t?H(t)&&H(e)?[...new Set([...t,...e])]:$t(Object.create(null),zn(t),zn(e??{})):e}function Ro(t,e){if(!t)return e;if(!e)return t;const n=$t(Object.create(null),t);for(const s in e)n[s]=lt(t[s],e[s]);return n}let Bo=null;function Ao(t,e){if(at){let n=at.provides;const s=at.parent&&at.parent.provides;s===n&&(n=at.provides=Object.create(s)),n[t]=e}}function Se(t,e,n=!1){const s=at||_t;if(s||Bo){const r=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&J(e)?e.call(s&&s.proxy):e}}const No={},Ss=t=>Object.getPrototypeOf(t)===No,Eo=Go,$o=Symbol.for("v-scx"),qo=()=>Se($o);function Ke(t,e,n){return zo(t,e,n)}function zo(t,e,n=fn){const{immediate:s,deep:r,flush:o,once:i}=n,a=$t({},n);let c;if(je)if(o==="sync"){const f=qo();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!e||s)a.once=!0;else return{stop:Pt,resume:Pt,pause:Pt};const S=at;a.call=(f,v,B)=>Fe(f,S,v,B);let y=!1;o==="post"?a.scheduler=f=>{Eo(f,S&&S.suspense)}:o!=="sync"&&(y=!0,a.scheduler=(f,v)=>{v?f():io(f)}),a.augmentJob=f=>{e&&(f.flags|=4),y&&(f.flags|=2,S&&(f.id=S.uid,f.i=S))};const d=no(t,e,a);return c&&c.push(d),d}function Uo(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function Fo(t,e=!0){let n;for(let s=0;s<t.length;s++){const r=t[s];if(Rs(r)){if(r.type!==se||r.children==="v-if"){if(n)return;n=r}}else return}return n}function Ms({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Lo=t=>t.__isSuspense;let dn=0;const jo={name:"Suspense",__isSuspense:!0,process(t,e,n,s,r,o,i,a,c,S){if(t==null)Ho(e,n,s,r,o,i,a,c,S);else{if(o&&o.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}Jo(t,e,n,s,r,i,a,c,S)}},hydrate:Qo,normalize:Yo},Vo=jo;function fe(t,e){const n=t.props&&t.props[e];J(n)&&n()}function Ho(t,e,n,s,r,o,i,a,c){const{p:S,o:{createElement:y}}=c,d=y("div"),f=t.suspense=Ds(t,r,s,e,d,n,o,i,a,c);S(null,f.pendingBranch=t.ssContent,d,null,s,f,o,i),f.deps>0?(fe(t,"onPending"),fe(t,"onFallback"),S(null,t.ssFallback,e,n,s,null,o,i),Zt(f,t.ssFallback)):f.resolve(!1,!0)}function Jo(t,e,n,s,r,o,i,a,{p:c,um:S,o:{createElement:y}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,v=e.ssFallback,{activeBranch:B,pendingBranch:I,isInFallback:A,isHydrating:X}=d;if(I)d.pendingBranch=f,Xe(f,I)?(c(I,f,d.hiddenContainer,null,r,d,o,i,a),d.deps<=0?d.resolve():A&&(X||(c(B,v,n,s,r,null,o,i,a),Zt(d,v)))):(d.pendingId=dn++,X?(d.isHydrating=!1,d.activeBranch=I):S(I,r,d),d.deps=0,d.effects.length=0,d.hiddenContainer=y("div"),A?(c(null,f,d.hiddenContainer,null,r,d,o,i,a),d.deps<=0?d.resolve():(c(B,v,n,s,r,null,o,i,a),Zt(d,v))):B&&Xe(f,B)?(c(B,f,n,s,r,d,o,i,a),d.resolve(!0)):(c(null,f,d.hiddenContainer,null,r,d,o,i,a),d.deps<=0&&d.resolve()));else if(B&&Xe(f,B))c(B,f,n,s,r,d,o,i,a),Zt(d,f);else if(fe(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=dn++,c(null,f,d.hiddenContainer,null,r,d,o,i,a),d.deps<=0)d.resolve();else{const{timeout:et,pendingId:L}=d;et>0?setTimeout(()=>{d.pendingId===L&&d.fallback(v)},et):et===0&&d.fallback(v)}}function Ds(t,e,n,s,r,o,i,a,c,S,y=!1){const{p:d,m:f,um:v,n:B,o:{parentNode:I,remove:A}}=S;let X;const et=Ko(t);et&&e&&e.pendingBranch&&(X=e.pendingId,e.deps++);const L=t.props?Cr(t.props.timeout):void 0,nt=o,w={vnode:t,parent:e,parentComponent:n,namespace:i,container:s,hiddenContainer:r,deps:0,pendingId:dn++,timeout:typeof L=="number"?L:-1,activeBranch:null,pendingBranch:null,isInFallback:!y,isHydrating:y,isUnmounted:!1,effects:[],resolve(T=!1,x=!1){const{vnode:P,activeBranch:g,pendingBranch:m,pendingId:h,effects:l,parentComponent:M,container:k}=w;let D=!1;w.isHydrating?w.isHydrating=!1:T||(D=g&&m.transition&&m.transition.mode==="out-in",D&&(g.transition.afterLeave=()=>{h===w.pendingId&&(f(m,k,o===nt?B(g):o,0),cn(l))}),g&&(I(g.el)===k&&(o=B(g)),v(g,M,w,!0)),D||f(m,k,o,0)),Zt(w,m),w.pendingBranch=null,w.isInFallback=!1;let E=w.parent,N=!1;for(;E;){if(E.pendingBranch){E.effects.push(...l),N=!0;break}E=E.parent}!N&&!D&&cn(l),w.effects=[],et&&e&&e.pendingBranch&&X===e.pendingId&&(e.deps--,e.deps===0&&!x&&e.resolve()),fe(P,"onResolve")},fallback(T){if(!w.pendingBranch)return;const{vnode:x,activeBranch:P,parentComponent:g,container:m,namespace:h}=w;fe(x,"onFallback");const l=B(P),M=()=>{w.isInFallback&&(d(null,T,m,l,g,null,h,a,c),Zt(w,T))},k=T.transition&&T.transition.mode==="out-in";k&&(P.transition.afterLeave=M),w.isInFallback=!0,v(P,g,null,!0),k||M()},move(T,x,P){w.activeBranch&&f(w.activeBranch,T,x,P),w.container=T},next(){return w.activeBranch&&B(w.activeBranch)},registerDep(T,x,P){const g=!!w.pendingBranch;g&&w.deps++;const m=T.vnode.el;T.asyncDep.catch(h=>{Cn(h,T,0)}).then(h=>{if(T.isUnmounted||w.isUnmounted||w.pendingId!==T.suspenseId)return;T.asyncResolved=!0;const{vnode:l}=T;oi(T,h),m&&(l.el=m);const M=!m&&T.subTree.el;x(T,l,I(m||T.subTree.el),m?null:B(T.subTree),w,i,P),M&&A(M),Ms(T,l.el),g&&--w.deps===0&&w.resolve()})},unmount(T,x){w.isUnmounted=!0,w.activeBranch&&v(w.activeBranch,n,T,x),w.pendingBranch&&v(w.pendingBranch,n,T,x)}};return w}function Qo(t,e,n,s,r,o,i,a,c){const S=e.suspense=Ds(e,s,n,t.parentNode,document.createElement("div"),null,r,o,i,a,!0),y=c(t,S.pendingBranch=e.ssContent,n,S,o,i);return S.deps===0&&S.resolve(!1,!0),y}function Yo(t){const{shapeFlag:e,children:n}=t,s=e&32;t.ssContent=jn(s?n.default:n),t.ssFallback=s?jn(n.fallback):Et(se)}function jn(t){let e;if(J(t)){const n=re&&t._c;n&&(t._d=!1,te()),t=t(),n&&(t._d=!0,e=ut,Os())}return H(t)&&(t=Fo(t)),t=ti(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Go(t,e){e&&e.pendingBranch?H(t)?e.effects.push(...t):e.effects.push(t):cn(t)}function Zt(t,e){t.activeBranch=e;const{vnode:n,parentComponent:s}=t;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;n.el=r,s&&s.subTree===n&&(s.vnode.el=r,Ms(s,r))}function Ko(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Sn=Symbol.for("v-fgt"),Ps=Symbol.for("v-txt"),se=Symbol.for("v-cmt"),Me=[];let ut=null;function te(t=!1){Me.push(ut=t?null:[])}function Os(){Me.pop(),ut=Me[Me.length-1]||null}let re=1;function Vn(t){re+=t,t<0&&ut&&(ut.hasOnce=!0)}function Ts(t){return t.dynamicChildren=re>0?ut||br:null,Os(),re>0&&ut&&ut.push(t),t}function We(t,e,n,s,r,o){return Ts(Ie(t,e,n,s,r,o,!0))}function Is(t,e,n,s,r){return Ts(Et(t,e,n,s,r,!0))}function Rs(t){return t?t.__v_isVNode===!0:!1}function Xe(t,e){return t.type===e.type&&t.key===e.key}const Bs=({key:t})=>t??null,De=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?kt(t)||gt(t)||J(t)?{i:_t,r:t,k:e,f:!!n}:t:null);function Ie(t,e=null,n=null,s=0,r=null,o=t===Sn?0:1,i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Bs(e),ref:e&&De(e),scopeId:bs,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:_t};return a?(Mn(c,n),o&128&&t.normalize(c)):n&&(c.shapeFlag|=kt(n)?8:16),re>0&&!i&&ut&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&ut.push(c),c}const Et=Wo;function Wo(t,e=null,n=null,s=0,r=null,o=!1){if((!t||t===So)&&(t=se),Rs(t)){const a=Re(t,e,!0);return n&&Mn(a,n),re>0&&!o&&ut&&(a.shapeFlag&6?ut[ut.indexOf(t)]=a:ut.push(a)),a.patchFlag=-2,a}if(ai(t)&&(t=t.__vccOpts),e){e=Xo(e);let{class:a,style:c}=e;a&&!kt(a)&&(e.class=Wt(a)),it(c)&&(_n(c)&&!H(c)&&(c=$t({},c)),e.style=gn(c))}const i=kt(t)?1:Lo(t)?128:co(t)?64:it(t)?4:J(t)?2:0;return Ie(t,e,n,s,r,i,o,!0)}function Xo(t){return t?_n(t)||Ss(t)?$t({},t):t:null}function Re(t,e,n=!1,s=!1){const{props:r,ref:o,patchFlag:i,children:a,transition:c}=t,S=e?ni(r||{},e):r,y={__v_isVNode:!0,__v_skip:!0,type:t.type,props:S,key:S&&Bs(S),ref:e&&e.ref?n&&o?H(o)?o.concat(De(e)):[o,De(e)]:De(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Sn?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Re(t.ssContent),ssFallback:t.ssFallback&&Re(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&ws(y,c.clone(y)),y}function Zo(t=" ",e=0){return Et(Ps,null,t,e)}function Hn(t="",e=!1){return e?(te(),Is(se,null,t)):Et(se,null,t)}function ti(t){return t==null||typeof t=="boolean"?Et(se):H(t)?Et(Sn,null,t.slice()):typeof t=="object"?ei(t):Et(Ps,null,String(t))}function ei(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Re(t)}function Mn(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(H(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Mn(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Ss(e)?e._ctx=_t:r===3&&_t&&(_t.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else J(e)?(e={default:e,_ctx:_t},n=32):(e=String(e),s&64?(n=16,e=[Zo(e)]):n=8);t.children=e,t.shapeFlag|=n}function ni(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Wt([e.class,s.class]));else if(r==="style")e.style=gn([e.style,s.style]);else if(wr(r)){const o=e[r],i=s[r];i&&o!==i&&!(H(o)&&o.includes(i))&&(e[r]=o?[].concat(o,i):i)}else r!==""&&(e[r]=s[r])}return e}let at=null;const si=()=>at||_t;let Be;{const t=Sr(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),o=>{r.length>1?r.forEach(i=>i(o)):r[0](o)}};Be=e("__VUE_INSTANCE_SETTERS__",n=>at=n),e("__VUE_SSR_SETTERS__",n=>je=n)}const Ae=t=>{const e=at;return Be(t),t.scope.on(),()=>{t.scope.off(),Be(e)}},ri=()=>{at&&at.scope.off(),Be(null)};let je=!1;function oi(t,e,n){J(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:it(e)&&(t.setupState=Xr(e)),ii(t)}function ii(t,e,n){const s=t.type;t.render||(t.render=s.render||Pt);{const r=Ae(t);he();try{Do(t)}finally{ge(),r()}}}function ai(t){return J(t)&&"__vccOpts"in t}const li=(t,e)=>to(t,e,je),Ze={numeric:"Numeric",alphanumeric:"Alphanumeric",byte:"Byte"};function ci(t){switch(!0){case/^[0-9]*$/.test(t):return Ze.numeric;case/^[0-9A-Z $%*+\-./:]*$/.test(t):return Ze.alphanumeric;default:return Ze.byte}}const xe=t=>!!t&&typeof t=="object"&&!Array.isArray(t);function Ne(t,...e){if(!e.length)return t;const n=e.shift();return n===void 0||!xe(t)||!xe(n)?t:(t={...t},Object.keys(n).forEach(s=>{const r=t[s],o=n[s];Array.isArray(r)&&Array.isArray(o)?t[s]=o:xe(r)&&xe(o)?t[s]=Ne(Object.assign({},r),o):t[s]=o}),Ne(t,...e))}function ui(t,e){const n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function di({originalHeight:t,originalWidth:e,maxHiddenDots:n,maxHiddenAxisDots:s,dotSize:r}){const o={x:0,y:0},i={x:0,y:0};if(t<=0||e<=0||n<=0||r<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const a=t/e;return o.x=Math.floor(Math.sqrt(n/a)),o.x<=0&&(o.x=1),s&&s<o.x&&(o.x=s),o.x%2===0&&o.x--,i.x=o.x*r,o.y=1+2*Math.ceil((o.x*a-1)/2),i.y=Math.round(i.x*a),(o.y*o.x>n||s&&s<o.y)&&(s&&s<o.y?(o.y=s,o.y%2===0&&o.x--):o.y-=2,i.y=o.y*r,o.x=1+2*Math.ceil((o.y/a-1)/2),i.x=Math.round(i.y/a)),{height:i.y,width:i.x,hideYDots:o.y,hideXDots:o.x}}const fi={L:.07,M:.15,Q:.25,H:.3},Yt={dots:"dots",rounded:"rounded",classy:"classy",classyRounded:"classy-rounded",square:"square",extraRounded:"extra-rounded"};class tn{constructor({context:e,type:n}){ct(this,"_context"),ct(this,"_type"),this._context=e,this._type=n}draw(e,n,s,r){const o=this._context,i=this._type;let a;switch(i){case Yt.dots:a=this._drawDot;break;case Yt.classy:a=this._drawClassy;break;case Yt.classyRounded:a=this._drawClassyRounded;break;case Yt.rounded:a=this._drawRounded;break;case Yt.extraRounded:a=this._drawExtraRounded;break;case Yt.square:default:a=this._drawSquare}a.call(this,{x:e,y:n,size:s,context:o,getNeighbor:r})}_rotateFigure({x:e,y:n,size:s,context:r,rotation:o,draw:i}){const a=e+s/2,c=n+s/2;r.translate(a,c),o&&r.rotate(o),i(),r.closePath(),o&&r.rotate(-o),r.translate(-a,-c)}_basicDot(e){const{size:n,context:s}=e;this._rotateFigure({...e,draw:()=>{s.moveTo(0,0),s.arc(0,0,n/2,0,Math.PI*2)}})}_basicSquare(e){const{size:n,context:s}=e;this._rotateFigure({...e,draw:()=>{s.moveTo(0,0),s.rect(-n/2,-n/2,n,n)}})}_basicSideRounded(e){const{size:n,context:s}=e;this._rotateFigure({...e,draw:()=>{s.moveTo(0,0),s.arc(0,0,n/2,-Math.PI/2,Math.PI/2),s.lineTo(-n/2,n/2),s.lineTo(-n/2,-n/2),s.lineTo(0,-n/2)}})}_basicCornerRounded(e){const{size:n,context:s}=e;this._rotateFigure({...e,draw:()=>{s.moveTo(0,0),s.arc(0,0,n/2,-Math.PI/2,0),s.lineTo(n/2,n/2),s.lineTo(-n/2,n/2),s.lineTo(-n/2,-n/2),s.lineTo(0,-n/2)}})}_basicCornerExtraRounded(e){const{size:n,context:s}=e;this._rotateFigure({...e,draw:()=>{s.moveTo(0,0),s.arc(-n/2,n/2,n,-Math.PI/2,0),s.lineTo(-n/2,n/2),s.lineTo(-n/2,-n/2)}})}_basicCornersRounded(e){const{size:n,context:s}=e;this._rotateFigure({...e,draw:()=>{s.moveTo(0,0),s.arc(0,0,n/2,-Math.PI/2,0),s.lineTo(n/2,n/2),s.lineTo(0,n/2),s.arc(0,0,n/2,Math.PI/2,Math.PI),s.lineTo(-n/2,-n/2),s.lineTo(0,-n/2)}})}_basicCornersExtraRounded(e){const{size:n,context:s}=e;this._rotateFigure({...e,draw:()=>{s.moveTo(0,0),s.arc(-n/2,n/2,n,-Math.PI/2,0),s.arc(n/2,-n/2,n,Math.PI/2,Math.PI)}})}_drawDot({x:e,y:n,size:s,context:r}){this._basicDot({x:e,y:n,size:s,context:r,rotation:0})}_drawSquare({x:e,y:n,size:s,context:r}){this._basicSquare({x:e,y:n,size:s,context:r,rotation:0})}_drawRounded({x:e,y:n,size:s,context:r,getNeighbor:o}){const i=+o(-1,0),a=+o(1,0),c=+o(0,-1),S=+o(0,1),y=i+a+c+S;if(y===0){this._basicDot({x:e,y:n,size:s,context:r,rotation:0});return}if(y>2||i&&a||c&&S){this._basicSquare({x:e,y:n,size:s,context:r,rotation:0});return}if(y===2){let d=0;i&&c?d=Math.PI/2:c&&a?d=Math.PI:a&&S&&(d=-Math.PI/2),this._basicCornerRounded({x:e,y:n,size:s,context:r,rotation:d});return}if(y===1){let d=0;c?d=Math.PI/2:a?d=Math.PI:S&&(d=-Math.PI/2),this._basicSideRounded({x:e,y:n,size:s,context:r,rotation:d})}}_drawExtraRounded({x:e,y:n,size:s,context:r,getNeighbor:o}){const i=+o(-1,0),a=+o(1,0),c=+o(0,-1),S=+o(0,1),y=i+a+c+S;if(y===0){this._basicDot({x:e,y:n,size:s,context:r,rotation:0});return}if(y>2||i&&a||c&&S){this._basicSquare({x:e,y:n,size:s,context:r,rotation:0});return}if(y===2){let d=0;i&&c?d=Math.PI/2:c&&a?d=Math.PI:a&&S&&(d=-Math.PI/2),this._basicCornerExtraRounded({x:e,y:n,size:s,context:r,rotation:d});return}if(y===1){let d=0;c?d=Math.PI/2:a?d=Math.PI:S&&(d=-Math.PI/2),this._basicSideRounded({x:e,y:n,size:s,context:r,rotation:d})}}_drawClassy({x:e,y:n,size:s,context:r,getNeighbor:o}){const i=+o(-1,0),a=+o(1,0),c=+o(0,-1),S=+o(0,1);if(i+a+c+S===0){this._basicCornersRounded({x:e,y:n,size:s,context:r,rotation:Math.PI/2});return}if(!i&&!c){this._basicCornerRounded({x:e,y:n,size:s,context:r,rotation:-Math.PI/2});return}if(!a&&!S){this._basicCornerRounded({x:e,y:n,size:s,context:r,rotation:Math.PI/2});return}this._basicSquare({x:e,y:n,size:s,context:r,rotation:0})}_drawClassyRounded({x:e,y:n,size:s,context:r,getNeighbor:o}){const i=+o(-1,0),a=+o(1,0),c=+o(0,-1),S=+o(0,1);if(i+a+c+S===0){this._basicCornersRounded({x:e,y:n,size:s,context:r,rotation:Math.PI/2});return}if(!i&&!c){this._basicCornerExtraRounded({x:e,y:n,size:s,context:r,rotation:-Math.PI/2});return}if(!a&&!S){this._basicCornerExtraRounded({x:e,y:n,size:s,context:r,rotation:Math.PI/2});return}this._basicSquare({x:e,y:n,size:s,context:r,rotation:0})}}const en={dot:"dot",square:"square",extraRounded:"extra-rounded"};class hi{constructor({context:e,type:n}){ct(this,"_context"),ct(this,"_type"),this._context=e,this._type=n}draw(e,n,s,r){const o=this._context,i=this._type;let a;switch(i){case en.square:a=this._drawSquare;break;case en.extraRounded:a=this._drawExtraRounded;break;case en.dot:default:a=this._drawDot}a.call(this,{x:e,y:n,size:s,context:o,rotation:r})}_rotateFigure({x:e,y:n,size:s,context:r,rotation:o,draw:i}){const a=e+s/2,c=n+s/2;r.translate(a,c),o&&r.rotate(o),i(),r.closePath(),o&&r.rotate(-o),r.translate(-a,-c)}_basicDot(e){const{size:n,context:s}=e,r=n/7;this._rotateFigure({...e,draw:()=>{s.arc(0,0,n/2,0,Math.PI*2),s.arc(0,0,n/2-r,0,Math.PI*2)}})}_basicSquare(e){const{size:n,context:s}=e,r=n/7;this._rotateFigure({...e,draw:()=>{s.rect(-n/2,-n/2,n,n),s.rect(-n/2+r,-n/2+r,n-2*r,n-2*r)}})}_basicExtraRounded(e){const{size:n,context:s}=e,r=n/7;this._rotateFigure({...e,draw:()=>{s.arc(-r,-r,2.5*r,Math.PI,-Math.PI/2),s.lineTo(r,-3.5*r),s.arc(r,-r,2.5*r,-Math.PI/2,0),s.lineTo(3.5*r,-r),s.arc(r,r,2.5*r,0,Math.PI/2),s.lineTo(-r,3.5*r),s.arc(-r,r,2.5*r,Math.PI/2,Math.PI),s.lineTo(-3.5*r,-r),s.arc(-r,-r,1.5*r,Math.PI,-Math.PI/2),s.lineTo(r,-2.5*r),s.arc(r,-r,1.5*r,-Math.PI/2,0),s.lineTo(2.5*r,-r),s.arc(r,r,1.5*r,0,Math.PI/2),s.lineTo(-r,2.5*r),s.arc(-r,r,1.5*r,Math.PI/2,Math.PI),s.lineTo(-2.5*r,-r)}})}_drawDot({x:e,y:n,size:s,context:r,rotation:o}){this._basicDot({x:e,y:n,size:s,context:r,rotation:o})}_drawSquare({x:e,y:n,size:s,context:r,rotation:o}){this._basicSquare({x:e,y:n,size:s,context:r,rotation:o})}_drawExtraRounded({x:e,y:n,size:s,context:r,rotation:o}){this._basicExtraRounded({x:e,y:n,size:s,context:r,rotation:o})}}const Jn={dot:"dot",square:"square"};class gi{constructor({context:e,type:n}){ct(this,"_context"),ct(this,"_type"),this._context=e,this._type=n}draw(e,n,s,r){const o=this._context;switch(this._type){case Jn.square:this._drawSquare({x:e,y:n,size:s,context:o,rotation:r});break;case Jn.dot:default:this._drawDot({x:e,y:n,size:s,context:o,rotation:r})}}_rotateFigure({x:e,y:n,size:s,context:r,rotation:o,draw:i}){const a=e+s/2,c=n+s/2;r.moveTo(0,0),r.translate(a,c),o&&r.rotate(o),i(),r.closePath(),o&&r.rotate(-o),r.translate(-a,-c)}_drawDot(e){const{size:n,context:s}=e;this._rotateFigure({...e,draw:()=>{s.moveTo(0,0),s.arc(0,0,n/2,0,Math.PI*2)}})}_drawSquare(e){const{size:n,context:s}=e;this._rotateFigure({...e,draw:()=>{s.moveTo(0,0),s.rect(-n/2,-n/2,n,n)}})}}const pi={radial:"radial"},qt=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],zt=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class vi{constructor(e){ct(this,"_canvas"),ct(this,"_options"),ct(this,"_qr"),ct(this,"_image"),this._canvas=document.createElement("canvas"),this._canvas.width=e.width,this._canvas.height=e.height,this._options=e}get context(){return this._canvas.getContext("2d")}get width(){return this._canvas.width}get height(){return this._canvas.height}getCanvas(){return this._canvas}clear(){const e=this.context;e&&e.clearRect(0,0,this._canvas.width,this._canvas.height)}async drawQR(e){const n=e.getModuleCount(),s=Math.min(this._options.width,this._options.height)-this._options.margin*2,r=Math.floor(s/n);let o={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=e,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:i,qrOptions:a}=this._options,c=i.imageSize*fi[a.errorCorrectionLevel],S=Math.floor(c*n*n);o=di({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:S,maxHiddenAxisDots:n-14,dotSize:r})}this.clear(),this.drawBackground(),this.drawDots((i,a)=>{var c,S,y,d,f,v;return!(this._options.imageOptions.hideBackgroundDots&&i>=(n-o.hideXDots)/2&&i<(n+o.hideXDots)/2&&a>=(n-o.hideYDots)/2&&a<(n+o.hideYDots)/2||(c=qt[i])!=null&&c[a]||(S=qt[i-n+7])!=null&&S[a]||(y=qt[i])!=null&&y[a-n+7]||(d=zt[i])!=null&&d[a]||(f=zt[i-n+7])!=null&&f[a]||(v=zt[i])!=null&&v[a-n+7])}),this.drawCorners(),this._options.image&&this.drawImage({width:o.width,height:o.height,count:n,dotSize:r})}drawBackground(){const e=this.context,n=this._options;if(e){if(n.backgroundOptions.gradient){const s=n.backgroundOptions.gradient,r=this._createGradient({context:e,options:s,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height});s.colorStops.forEach(({offset:o,color:i})=>{r.addColorStop(o,i)}),e.fillStyle=r}else n.backgroundOptions.color&&(e.fillStyle=n.backgroundOptions.color);e.fillRect(0,0,this._canvas.width,this._canvas.height)}}drawDots(e){if(!this._qr)throw"QR code is not defined";const n=this.context;if(!n)throw"QR code is not defined";const s=this._options,r=this._qr.getModuleCount();if(r>s.width||r>s.height)throw"The canvas is too small.";const o=Math.min(s.width,s.height)-s.margin*2,i=Math.floor(o/r),a=Math.floor((s.width-r*i)/2),c=Math.floor((s.height-r*i)/2),S=new tn({context:n,type:s.dotsOptions.type});n.beginPath();for(let y=0;y<r;y++)for(let d=0;d<r;d++)e&&!e(y,d)||this._qr.isDark(y,d)&&S.draw(a+y*i,c+d*i,i,(f,v)=>y+f<0||d+v<0||y+f>=r||d+v>=r||e&&!e(y+f,d+v)?!1:!!this._qr&&this._qr.isDark(y+f,d+v));if(s.dotsOptions.gradient){const y=s.dotsOptions.gradient,d=this._createGradient({context:n,options:y,additionalRotation:0,x:a,y:c,size:r*i});y.colorStops.forEach(({offset:f,color:v})=>{d.addColorStop(f,v)}),n.fillStyle=n.strokeStyle=d}else s.dotsOptions.color&&(n.fillStyle=n.strokeStyle=s.dotsOptions.color);n.fill("evenodd")}drawCorners(e){if(!this._qr)throw"QR code is not defined";const n=this.context;if(!n)throw"QR code is not defined";const s=this._options,r=this._qr.getModuleCount(),o=Math.min(s.width,s.height)-s.margin*2,i=Math.floor(o/r),a=i*7,c=i*3,S=Math.floor((s.width-r*i)/2),y=Math.floor((s.height-r*i)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([d,f,v])=>{var B,I,A,X,et,L,nt,w,T,x;if(e&&!e(d,f))return;const P=S+d*i*(r-7),g=y+f*i*(r-7);if((B=s.cornersSquareOptions)!=null&&B.type){const m=new hi({context:n,type:(I=s.cornersSquareOptions)==null?void 0:I.type});n.beginPath(),m.draw(P,g,a,v)}else{const m=new tn({context:n,type:s.dotsOptions.type});n.beginPath();for(let h=0;h<qt.length;h++)for(let l=0;l<qt[h].length;l++)(A=qt[h])!=null&&A[l]&&m.draw(P+h*i,g+l*i,i,(M,k)=>{var D;return!!((D=qt[h+M])!=null&&D[l+k])})}if((X=s.cornersSquareOptions)!=null&&X.gradient){const m=s.cornersSquareOptions.gradient,h=this._createGradient({context:n,options:m,additionalRotation:v,x:P,y:g,size:a});m.colorStops.forEach(({offset:l,color:M})=>{h.addColorStop(l,M)}),n.fillStyle=n.strokeStyle=h}else(et=s.cornersSquareOptions)!=null&&et.color&&(n.fillStyle=n.strokeStyle=s.cornersSquareOptions.color);if(n.fill("evenodd"),(L=s.cornersDotOptions)!=null&&L.type){const m=new gi({context:n,type:(nt=s.cornersDotOptions)==null?void 0:nt.type});n.beginPath(),m.draw(P+i*2,g+i*2,c,v)}else{const m=new tn({context:n,type:s.dotsOptions.type});n.beginPath();for(let h=0;h<zt.length;h++)for(let l=0;l<zt[h].length;l++)(w=zt[h])!=null&&w[l]&&m.draw(P+h*i,g+l*i,i,(M,k)=>{var D;return!!((D=zt[h+M])!=null&&D[l+k])})}if((T=s.cornersDotOptions)!=null&&T.gradient){const m=s.cornersDotOptions.gradient,h=this._createGradient({context:n,options:m,additionalRotation:v,x:P+i*2,y:g+i*2,size:c});m.colorStops.forEach(({offset:l,color:M})=>{h.addColorStop(l,M)}),n.fillStyle=n.strokeStyle=h}else(x=s.cornersDotOptions)!=null&&x.color&&(n.fillStyle=n.strokeStyle=s.cornersDotOptions.color);n.fill("evenodd")})}loadImage(){return new Promise((e,n)=>{const s=this._options,r=new Image;if(!s.image)return n("Image is not defined");typeof s.imageOptions.crossOrigin=="string"&&(r.crossOrigin=s.imageOptions.crossOrigin),this._image=r,r.onload=()=>{e()},r.src=s.image})}drawImage({width:e,height:n,count:s,dotSize:r}){const o=this.context;if(!o)throw"canvasContext is not defined";if(!this._image)throw"image is not defined";const i=this._options,a=Math.floor((i.width-s*r)/2),c=Math.floor((i.height-s*r)/2),S=a+i.imageOptions.margin+(s*r-e)/2,y=c+i.imageOptions.margin+(s*r-n)/2,d=e-i.imageOptions.margin*2,f=n-i.imageOptions.margin*2;o.drawImage(this._image,S,y,d<0?0:d,f<0?0:f)}_createGradient({context:e,options:n,additionalRotation:s,x:r,y:o,size:i}){let a;if(n.type===pi.radial)a=e.createRadialGradient(r+i/2,o+i/2,0,r+i/2,o+i/2,i/2);else{const c=((n.rotation||0)+s)%(2*Math.PI),S=(c+2*Math.PI)%(2*Math.PI);let y=r+i/2,d=o+i/2,f=r+i/2,v=o+i/2;S>=0&&S<=.25*Math.PI||S>1.75*Math.PI&&S<=2*Math.PI?(y=y-i/2,d=d-i/2*Math.tan(c),f=f+i/2,v=v+i/2*Math.tan(c)):S>.25*Math.PI&&S<=.75*Math.PI?(d=d-i/2,y=y-i/2/Math.tan(c),v=v+i/2,f=f+i/2/Math.tan(c)):S>.75*Math.PI&&S<=1.25*Math.PI?(y=y+i/2,d=d+i/2*Math.tan(c),f=f-i/2,v=v-i/2*Math.tan(c)):S>1.25*Math.PI&&S<=1.75*Math.PI&&(d=d+i/2,y=y+i/2/Math.tan(c),v=v-i/2,f=f-i/2/Math.tan(c)),a=e.createLinearGradient(Math.round(y),Math.round(d),Math.round(f),Math.round(v))}return a}}const As={};for(let t=0;t<=40;t++)As[t]=t;const mi={Q:"Q"},Qn={width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:As[0],mode:void 0,errorCorrectionLevel:mi.Q},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"}};function ke(t){const e={...t};if(!e.colorStops||!e.colorStops.length)throw"Field 'colorStops' is required in gradient";return e.rotation?e.rotation=Number(e.rotation):e.rotation=0,e.colorStops=e.colorStops.map(n=>({...n,offset:Number(n.offset)})),e}function Yn(t){const e={...t};return e.width=Number(e.width),e.height=Number(e.height),e.margin=Number(e.margin),e.imageOptions={...e.imageOptions,hideBackgroundDots:!!e.imageOptions.hideBackgroundDots,imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)},e.margin>Math.min(e.width,e.height)&&(e.margin=Math.min(e.width,e.height)),e.dotsOptions={...e.dotsOptions},e.dotsOptions.gradient&&(e.dotsOptions.gradient=ke(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions={...e.cornersSquareOptions},e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=ke(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions={...e.cornersDotOptions},e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=ke(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions={...e.backgroundOptions},e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=ke(e.backgroundOptions.gradient))),e}function yi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ns={exports:{}};(function(t,e){var n=function(){var s=function(w,T){var x=236,P=17,g=w,m=o[T],h=null,l=0,M=null,k=[],D={},E=function(b,_){l=g*4+17,h=function(p){for(var C=new Array(p),O=0;O<p;O+=1){C[O]=new Array(p);for(var R=0;R<p;R+=1)C[O][R]=null}return C}(l),N(0,0),N(l-7,0),N(0,l-7),rt(),Y(),yt(b,_),g>=7&&ft(b),M==null&&(M=Es(g,m,k)),St(M,_)},N=function(b,_){for(var p=-1;p<=7;p+=1)if(!(b+p<=-1||l<=b+p))for(var C=-1;C<=7;C+=1)_+C<=-1||l<=_+C||(0<=p&&p<=6&&(C==0||C==6)||0<=C&&C<=6&&(p==0||p==6)||2<=p&&p<=4&&2<=C&&C<=4?h[b+p][_+C]=!0:h[b+p][_+C]=!1)},q=function(){for(var b=0,_=0,p=0;p<8;p+=1){E(!0,p);var C=a.getLostPoint(D);(p==0||b>C)&&(b=C,_=p)}return _},Y=function(){for(var b=8;b<l-8;b+=1)h[b][6]==null&&(h[b][6]=b%2==0);for(var _=8;_<l-8;_+=1)h[6][_]==null&&(h[6][_]=_%2==0)},rt=function(){for(var b=a.getPatternPosition(g),_=0;_<b.length;_+=1)for(var p=0;p<b.length;p+=1){var C=b[_],O=b[p];if(h[C][O]==null)for(var R=-2;R<=2;R+=1)for(var z=-2;z<=2;z+=1)R==-2||R==2||z==-2||z==2||R==0&&z==0?h[C+R][O+z]=!0:h[C+R][O+z]=!1}},ft=function(b){for(var _=a.getBCHTypeNumber(g),p=0;p<18;p+=1){var C=!b&&(_>>p&1)==1;h[Math.floor(p/3)][p%3+l-8-3]=C}for(var p=0;p<18;p+=1){var C=!b&&(_>>p&1)==1;h[p%3+l-8-3][Math.floor(p/3)]=C}},yt=function(b,_){for(var p=m<<3|_,C=a.getBCHTypeInfo(p),O=0;O<15;O+=1){var R=!b&&(C>>O&1)==1;O<6?h[O][8]=R:O<8?h[O+1][8]=R:h[l-15+O][8]=R}for(var O=0;O<15;O+=1){var R=!b&&(C>>O&1)==1;O<8?h[8][l-O-1]=R:O<9?h[8][15-O-1+1]=R:h[8][15-O-1]=R}h[l-8][8]=!b},St=function(b,_){for(var p=-1,C=l-1,O=7,R=0,z=a.getMaskFunction(_),$=l-1;$>0;$-=2)for($==6&&($-=1);;){for(var G=0;G<2;G+=1)if(h[C][$-G]==null){var st=!1;R<b.length&&(st=(b[R]>>>O&1)==1);var F=z(C,$-G);F&&(st=!st),h[C][$-G]=st,O-=1,O==-1&&(R+=1,O=7)}if(C+=p,C<0||l<=C){C-=p,p=-p;break}}},Ht=function(b,_){for(var p=0,C=0,O=0,R=new Array(_.length),z=new Array(_.length),$=0;$<_.length;$+=1){var G=_[$].dataCount,st=_[$].totalCount-G;C=Math.max(C,G),O=Math.max(O,st),R[$]=new Array(G);for(var F=0;F<R[$].length;F+=1)R[$][F]=255&b.getBuffer()[F+p];p+=G;var pt=a.getErrorCorrectPolynomial(st),vt=S(R[$],pt.getLength()-1),Pn=vt.mod(pt);z[$]=new Array(pt.getLength()-1);for(var F=0;F<z[$].length;F+=1){var On=F+Pn.getLength()-z[$].length;z[$][F]=On>=0?Pn.getAt(On):0}}for(var Tn=0,F=0;F<_.length;F+=1)Tn+=_[F].totalCount;for(var Ve=new Array(Tn),pe=0,F=0;F<C;F+=1)for(var $=0;$<_.length;$+=1)F<R[$].length&&(Ve[pe]=R[$][F],pe+=1);for(var F=0;F<O;F+=1)for(var $=0;$<_.length;$+=1)F<z[$].length&&(Ve[pe]=z[$][F],pe+=1);return Ve},Es=function(b,_,p){for(var C=y.getRSBlocks(b,_),O=d(),R=0;R<p.length;R+=1){var z=p[R];O.put(z.getMode(),4),O.put(z.getLength(),a.getLengthInBits(z.getMode(),b)),z.write(O)}for(var $=0,R=0;R<C.length;R+=1)$+=C[R].dataCount;if(O.getLengthInBits()>$*8)throw"code length overflow. ("+O.getLengthInBits()+">"+$*8+")";for(O.getLengthInBits()+4<=$*8&&O.put(0,4);O.getLengthInBits()%8!=0;)O.putBit(!1);for(;!(O.getLengthInBits()>=$*8||(O.put(x,8),O.getLengthInBits()>=$*8));)O.put(P,8);return Ht(O,C)};D.addData=function(b,_){_=_||"Byte";var p=null;switch(_){case"Numeric":p=f(b);break;case"Alphanumeric":p=v(b);break;case"Byte":p=B(b);break;case"Kanji":p=I(b);break;default:throw"mode:"+_}k.push(p),M=null},D.isDark=function(b,_){if(b<0||l<=b||_<0||l<=_)throw b+","+_;return h[b][_]},D.getModuleCount=function(){return l},D.make=function(){if(g<1){for(var b=1;b<40;b++){for(var _=y.getRSBlocks(b,m),p=d(),C=0;C<k.length;C++){var O=k[C];p.put(O.getMode(),4),p.put(O.getLength(),a.getLengthInBits(O.getMode(),b)),O.write(p)}for(var R=0,C=0;C<_.length;C++)R+=_[C].dataCount;if(p.getLengthInBits()<=R*8)break}g=b}E(!1,q())},D.createTableTag=function(b,_){b=b||2,_=typeof _>"u"?b*4:_;var p="";p+='<table style="',p+=" border-width: 0px; border-style: none;",p+=" border-collapse: collapse;",p+=" padding: 0px; margin: "+_+"px;",p+='">',p+="<tbody>";for(var C=0;C<D.getModuleCount();C+=1){p+="<tr>";for(var O=0;O<D.getModuleCount();O+=1)p+='<td style="',p+=" border-width: 0px; border-style: none;",p+=" border-collapse: collapse;",p+=" padding: 0px; margin: 0px;",p+=" width: "+b+"px;",p+=" height: "+b+"px;",p+=" background-color: ",p+=D.isDark(C,O)?"#000000":"#ffffff",p+=";",p+='"/>';p+="</tr>"}return p+="</tbody>",p+="</table>",p},D.createSvgTag=function(b,_,p,C){var O={};typeof arguments[0]=="object"&&(O=arguments[0],b=O.cellSize,_=O.margin,p=O.alt,C=O.title),b=b||2,_=typeof _>"u"?b*4:_,p=typeof p=="string"?{text:p}:p||{},p.text=p.text||null,p.id=p.text?p.id||"qrcode-description":null,C=typeof C=="string"?{text:C}:C||{},C.text=C.text||null,C.id=C.text?C.id||"qrcode-title":null;var R=D.getModuleCount()*b+_*2,z,$,G,st,F="",pt;for(pt="l"+b+",0 0,"+b+" -"+b+",0 0,-"+b+"z ",F+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',F+=O.scalable?"":' width="'+R+'px" height="'+R+'px"',F+=' viewBox="0 0 '+R+" "+R+'" ',F+=' preserveAspectRatio="xMinYMin meet"',F+=C.text||p.text?' role="img" aria-labelledby="'+Jt([C.id,p.id].join(" ").trim())+'"':"",F+=">",F+=C.text?'<title id="'+Jt(C.id)+'">'+Jt(C.text)+"</title>":"",F+=p.text?'<description id="'+Jt(p.id)+'">'+Jt(p.text)+"</description>":"",F+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',F+='<path d="',G=0;G<D.getModuleCount();G+=1)for(st=G*b+_,z=0;z<D.getModuleCount();z+=1)D.isDark(G,z)&&($=z*b+_,F+="M"+$+","+st+pt);return F+='" stroke="transparent" fill="black"/>',F+="</svg>",F},D.createDataURL=function(b,_){b=b||2,_=typeof _>"u"?b*4:_;var p=D.getModuleCount()*b+_*2,C=_,O=p-_;return nt(p,p,function(R,z){if(C<=R&&R<O&&C<=z&&z<O){var $=Math.floor((R-C)/b),G=Math.floor((z-C)/b);return D.isDark(G,$)?0:1}else return 1})},D.createImgTag=function(b,_,p){b=b||2,_=typeof _>"u"?b*4:_;var C=D.getModuleCount()*b+_*2,O="";return O+="<img",O+=' src="',O+=D.createDataURL(b,_),O+='"',O+=' width="',O+=C,O+='"',O+=' height="',O+=C,O+='"',p&&(O+=' alt="',O+=Jt(p),O+='"'),O+="/>",O};var Jt=function(b){for(var _="",p=0;p<b.length;p+=1){var C=b.charAt(p);switch(C){case"<":_+="&lt;";break;case">":_+="&gt;";break;case"&":_+="&amp;";break;case'"':_+="&quot;";break;default:_+=C;break}}return _},$s=function(b){var _=1;b=typeof b>"u"?_*2:b;var p=D.getModuleCount()*_+b*2,C=b,O=p-b,R,z,$,G,st,F={"██":"█","█ ":"▀"," █":"▄","  ":" "},pt={"██":"▀","█ ":"▀"," █":" ","  ":" "},vt="";for(R=0;R<p;R+=2){for($=Math.floor((R-C)/_),G=Math.floor((R+1-C)/_),z=0;z<p;z+=1)st="█",C<=z&&z<O&&C<=R&&R<O&&D.isDark($,Math.floor((z-C)/_))&&(st=" "),C<=z&&z<O&&C<=R+1&&R+1<O&&D.isDark(G,Math.floor((z-C)/_))?st+=" ":st+="█",vt+=b<1&&R+1>=O?pt[st]:F[st];vt+=`
`}return p%2&&b>0?vt.substring(0,vt.length-p-1)+Array(p+1).join("▀"):vt.substring(0,vt.length-1)};return D.createASCII=function(b,_){if(b=b||1,b<2)return $s(_);b-=1,_=typeof _>"u"?b*2:_;var p=D.getModuleCount()*b+_*2,C=_,O=p-_,R,z,$,G,st=Array(b+1).join("██"),F=Array(b+1).join("  "),pt="",vt="";for(R=0;R<p;R+=1){for($=Math.floor((R-C)/b),vt="",z=0;z<p;z+=1)G=1,C<=z&&z<O&&C<=R&&R<O&&D.isDark($,Math.floor((z-C)/b))&&(G=0),vt+=G?st:F;for($=0;$<b;$+=1)pt+=vt+`
`}return pt.substring(0,pt.length-1)},D.renderTo2dContext=function(b,_){_=_||2;for(var p=D.getModuleCount(),C=0;C<p;C++)for(var O=0;O<p;O++)b.fillStyle=D.isDark(C,O)?"black":"white",b.fillRect(C*_,O*_,_,_)},D};s.stringToBytesFuncs={default:function(w){for(var T=[],x=0;x<w.length;x+=1){var P=w.charCodeAt(x);T.push(P&255)}return T}},s.stringToBytes=s.stringToBytesFuncs.default,s.createStringToBytes=function(w,T){var x=function(){for(var g=et(w),m=function(){var Y=g.read();if(Y==-1)throw"eof";return Y},h=0,l={};;){var M=g.read();if(M==-1)break;var k=m(),D=m(),E=m(),N=String.fromCharCode(M<<8|k),q=D<<8|E;l[N]=q,h+=1}if(h!=T)throw h+" != "+T;return l}(),P=63;return function(g){for(var m=[],h=0;h<g.length;h+=1){var l=g.charCodeAt(h);if(l<128)m.push(l);else{var M=x[g.charAt(h)];typeof M=="number"?(M&255)==M?m.push(M):(m.push(M>>>8),m.push(M&255)):m.push(P)}}return m}};var r={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},o={L:1,M:0,Q:3,H:2},i={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=function(){var w=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],T=1335,x=7973,P=21522,g={},m=function(h){for(var l=0;h!=0;)l+=1,h>>>=1;return l};return g.getBCHTypeInfo=function(h){for(var l=h<<10;m(l)-m(T)>=0;)l^=T<<m(l)-m(T);return(h<<10|l)^P},g.getBCHTypeNumber=function(h){for(var l=h<<12;m(l)-m(x)>=0;)l^=x<<m(l)-m(x);return h<<12|l},g.getPatternPosition=function(h){return w[h-1]},g.getMaskFunction=function(h){switch(h){case i.PATTERN000:return function(l,M){return(l+M)%2==0};case i.PATTERN001:return function(l,M){return l%2==0};case i.PATTERN010:return function(l,M){return M%3==0};case i.PATTERN011:return function(l,M){return(l+M)%3==0};case i.PATTERN100:return function(l,M){return(Math.floor(l/2)+Math.floor(M/3))%2==0};case i.PATTERN101:return function(l,M){return l*M%2+l*M%3==0};case i.PATTERN110:return function(l,M){return(l*M%2+l*M%3)%2==0};case i.PATTERN111:return function(l,M){return(l*M%3+(l+M)%2)%2==0};default:throw"bad maskPattern:"+h}},g.getErrorCorrectPolynomial=function(h){for(var l=S([1],0),M=0;M<h;M+=1)l=l.multiply(S([1,c.gexp(M)],0));return l},g.getLengthInBits=function(h,l){if(1<=l&&l<10)switch(h){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw"mode:"+h}else if(l<27)switch(h){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw"mode:"+h}else if(l<41)switch(h){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw"mode:"+h}else throw"type:"+l},g.getLostPoint=function(h){for(var l=h.getModuleCount(),M=0,k=0;k<l;k+=1)for(var D=0;D<l;D+=1){for(var E=0,N=h.isDark(k,D),q=-1;q<=1;q+=1)if(!(k+q<0||l<=k+q))for(var Y=-1;Y<=1;Y+=1)D+Y<0||l<=D+Y||q==0&&Y==0||N==h.isDark(k+q,D+Y)&&(E+=1);E>5&&(M+=3+E-5)}for(var k=0;k<l-1;k+=1)for(var D=0;D<l-1;D+=1){var rt=0;h.isDark(k,D)&&(rt+=1),h.isDark(k+1,D)&&(rt+=1),h.isDark(k,D+1)&&(rt+=1),h.isDark(k+1,D+1)&&(rt+=1),(rt==0||rt==4)&&(M+=3)}for(var k=0;k<l;k+=1)for(var D=0;D<l-6;D+=1)h.isDark(k,D)&&!h.isDark(k,D+1)&&h.isDark(k,D+2)&&h.isDark(k,D+3)&&h.isDark(k,D+4)&&!h.isDark(k,D+5)&&h.isDark(k,D+6)&&(M+=40);for(var D=0;D<l;D+=1)for(var k=0;k<l-6;k+=1)h.isDark(k,D)&&!h.isDark(k+1,D)&&h.isDark(k+2,D)&&h.isDark(k+3,D)&&h.isDark(k+4,D)&&!h.isDark(k+5,D)&&h.isDark(k+6,D)&&(M+=40);for(var ft=0,D=0;D<l;D+=1)for(var k=0;k<l;k+=1)h.isDark(k,D)&&(ft+=1);var yt=Math.abs(100*ft/l/l-50)/5;return M+=yt*10,M},g}(),c=function(){for(var w=new Array(256),T=new Array(256),x=0;x<8;x+=1)w[x]=1<<x;for(var x=8;x<256;x+=1)w[x]=w[x-4]^w[x-5]^w[x-6]^w[x-8];for(var x=0;x<255;x+=1)T[w[x]]=x;var P={};return P.glog=function(g){if(g<1)throw"glog("+g+")";return T[g]},P.gexp=function(g){for(;g<0;)g+=255;for(;g>=256;)g-=255;return w[g]},P}();function S(w,T){if(typeof w.length>"u")throw w.length+"/"+T;var x=function(){for(var g=0;g<w.length&&w[g]==0;)g+=1;for(var m=new Array(w.length-g+T),h=0;h<w.length-g;h+=1)m[h]=w[h+g];return m}(),P={};return P.getAt=function(g){return x[g]},P.getLength=function(){return x.length},P.multiply=function(g){for(var m=new Array(P.getLength()+g.getLength()-1),h=0;h<P.getLength();h+=1)for(var l=0;l<g.getLength();l+=1)m[h+l]^=c.gexp(c.glog(P.getAt(h))+c.glog(g.getAt(l)));return S(m,0)},P.mod=function(g){if(P.getLength()-g.getLength()<0)return P;for(var m=c.glog(P.getAt(0))-c.glog(g.getAt(0)),h=new Array(P.getLength()),l=0;l<P.getLength();l+=1)h[l]=P.getAt(l);for(var l=0;l<g.getLength();l+=1)h[l]^=c.gexp(c.glog(g.getAt(l))+m);return S(h,0).mod(g)},P}var y=function(){var w=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],T=function(g,m){var h={};return h.totalCount=g,h.dataCount=m,h},x={},P=function(g,m){switch(m){case o.L:return w[(g-1)*4+0];case o.M:return w[(g-1)*4+1];case o.Q:return w[(g-1)*4+2];case o.H:return w[(g-1)*4+3];default:return}};return x.getRSBlocks=function(g,m){var h=P(g,m);if(typeof h>"u")throw"bad rs block @ typeNumber:"+g+"/errorCorrectionLevel:"+m;for(var l=h.length/3,M=[],k=0;k<l;k+=1)for(var D=h[k*3+0],E=h[k*3+1],N=h[k*3+2],q=0;q<D;q+=1)M.push(T(E,N));return M},x}(),d=function(){var w=[],T=0,x={};return x.getBuffer=function(){return w},x.getAt=function(P){var g=Math.floor(P/8);return(w[g]>>>7-P%8&1)==1},x.put=function(P,g){for(var m=0;m<g;m+=1)x.putBit((P>>>g-m-1&1)==1)},x.getLengthInBits=function(){return T},x.putBit=function(P){var g=Math.floor(T/8);w.length<=g&&w.push(0),P&&(w[g]|=128>>>T%8),T+=1},x},f=function(w){var T=r.MODE_NUMBER,x=w,P={};P.getMode=function(){return T},P.getLength=function(h){return x.length},P.write=function(h){for(var l=x,M=0;M+2<l.length;)h.put(g(l.substring(M,M+3)),10),M+=3;M<l.length&&(l.length-M==1?h.put(g(l.substring(M,M+1)),4):l.length-M==2&&h.put(g(l.substring(M,M+2)),7))};var g=function(h){for(var l=0,M=0;M<h.length;M+=1)l=l*10+m(h.charAt(M));return l},m=function(h){if("0"<=h&&h<="9")return h.charCodeAt(0)-48;throw"illegal char :"+h};return P},v=function(w){var T=r.MODE_ALPHA_NUM,x=w,P={};P.getMode=function(){return T},P.getLength=function(m){return x.length},P.write=function(m){for(var h=x,l=0;l+1<h.length;)m.put(g(h.charAt(l))*45+g(h.charAt(l+1)),11),l+=2;l<h.length&&m.put(g(h.charAt(l)),6)};var g=function(m){if("0"<=m&&m<="9")return m.charCodeAt(0)-48;if("A"<=m&&m<="Z")return m.charCodeAt(0)-65+10;switch(m){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+m}};return P},B=function(w){var T=r.MODE_8BIT_BYTE,x=s.stringToBytes(w),P={};return P.getMode=function(){return T},P.getLength=function(g){return x.length},P.write=function(g){for(var m=0;m<x.length;m+=1)g.put(x[m],8)},P},I=function(w){var T=r.MODE_KANJI,x=s.stringToBytesFuncs.SJIS;if(!x)throw"sjis not supported.";(function(m,h){var l=x(m);if(l.length!=2||(l[0]<<8|l[1])!=h)throw"sjis not supported."})("友",38726);var P=x(w),g={};return g.getMode=function(){return T},g.getLength=function(m){return~~(P.length/2)},g.write=function(m){for(var h=P,l=0;l+1<h.length;){var M=(255&h[l])<<8|255&h[l+1];if(33088<=M&&M<=40956)M-=33088;else if(57408<=M&&M<=60351)M-=49472;else throw"illegal char at "+(l+1)+"/"+M;M=(M>>>8&255)*192+(M&255),m.put(M,13),l+=2}if(l<h.length)throw"illegal char at "+(l+1)},g},A=function(){var w=[],T={};return T.writeByte=function(x){w.push(x&255)},T.writeShort=function(x){T.writeByte(x),T.writeByte(x>>>8)},T.writeBytes=function(x,P,g){P=P||0,g=g||x.length;for(var m=0;m<g;m+=1)T.writeByte(x[m+P])},T.writeString=function(x){for(var P=0;P<x.length;P+=1)T.writeByte(x.charCodeAt(P))},T.toByteArray=function(){return w},T.toString=function(){var x="";x+="[";for(var P=0;P<w.length;P+=1)P>0&&(x+=","),x+=w[P];return x+="]",x},T},X=function(){var w=0,T=0,x=0,P="",g={},m=function(l){P+=String.fromCharCode(h(l&63))},h=function(l){if(!(l<0)){if(l<26)return 65+l;if(l<52)return 97+(l-26);if(l<62)return 48+(l-52);if(l==62)return 43;if(l==63)return 47}throw"n:"+l};return g.writeByte=function(l){for(w=w<<8|l&255,T+=8,x+=1;T>=6;)m(w>>>T-6),T-=6},g.flush=function(){if(T>0&&(m(w<<6-T),w=0,T=0),x%3!=0)for(var l=3-x%3,M=0;M<l;M+=1)P+="="},g.toString=function(){return P},g},et=function(w){var T=w,x=0,P=0,g=0,m={};m.read=function(){for(;g<8;){if(x>=T.length){if(g==0)return-1;throw"unexpected end of file./"+g}var l=T.charAt(x);if(x+=1,l=="=")return g=0,-1;l.match(/^\s$/)||(P=P<<6|h(l.charCodeAt(0)),g+=6)}var M=P>>>g-8&255;return g-=8,M};var h=function(l){if(65<=l&&l<=90)return l-65;if(97<=l&&l<=122)return l-97+26;if(48<=l&&l<=57)return l-48+52;if(l==43)return 62;if(l==47)return 63;throw"c:"+l};return m},L=function(w,T){var x=w,P=T,g=new Array(w*T),m={};m.setPixel=function(k,D,E){g[D*x+k]=E},m.write=function(k){k.writeString("GIF87a"),k.writeShort(x),k.writeShort(P),k.writeByte(128),k.writeByte(0),k.writeByte(0),k.writeByte(0),k.writeByte(0),k.writeByte(0),k.writeByte(255),k.writeByte(255),k.writeByte(255),k.writeString(","),k.writeShort(0),k.writeShort(0),k.writeShort(x),k.writeShort(P),k.writeByte(0);var D=2,E=l(D);k.writeByte(D);for(var N=0;E.length-N>255;)k.writeByte(255),k.writeBytes(E,N,255),N+=255;k.writeByte(E.length-N),k.writeBytes(E,N,E.length-N),k.writeByte(0),k.writeString(";")};var h=function(k){var D=k,E=0,N=0,q={};return q.write=function(Y,rt){if(Y>>>rt)throw"length over";for(;E+rt>=8;)D.writeByte(255&(Y<<E|N)),rt-=8-E,Y>>>=8-E,N=0,E=0;N=Y<<E|N,E=E+rt},q.flush=function(){E>0&&D.writeByte(N)},q},l=function(k){for(var D=1<<k,E=(1<<k)+1,N=k+1,q=M(),Y=0;Y<D;Y+=1)q.add(String.fromCharCode(Y));q.add(String.fromCharCode(D)),q.add(String.fromCharCode(E));var rt=A(),ft=h(rt);ft.write(D,N);var yt=0,St=String.fromCharCode(g[yt]);for(yt+=1;yt<g.length;){var Ht=String.fromCharCode(g[yt]);yt+=1,q.contains(St+Ht)?St=St+Ht:(ft.write(q.indexOf(St),N),q.size()<4095&&(q.size()==1<<N&&(N+=1),q.add(St+Ht)),St=Ht)}return ft.write(q.indexOf(St),N),ft.write(E,N),ft.flush(),rt.toByteArray()},M=function(){var k={},D=0,E={};return E.add=function(N){if(E.contains(N))throw"dup key:"+N;k[N]=D,D+=1},E.size=function(){return D},E.indexOf=function(N){return k[N]},E.contains=function(N){return typeof k[N]<"u"},E};return m},nt=function(w,T,x){for(var P=L(w,T),g=0;g<T;g+=1)for(var m=0;m<w;m+=1)P.setPixel(m,g,x(m,g));var h=A();P.write(h);for(var l=X(),M=h.toByteArray(),k=0;k<M.length;k+=1)l.writeByte(M[k]);return l.flush(),"data:image/gif;base64,"+l};return s}();(function(){n.stringToBytesFuncs["UTF-8"]=function(s){function r(o){for(var i=[],a=0;a<o.length;a++){var c=o.charCodeAt(a);c<128?i.push(c):c<2048?i.push(192|c>>6,128|c&63):c<55296||c>=57344?i.push(224|c>>12,128|c>>6&63,128|c&63):(a++,c=65536+((c&1023)<<10|o.charCodeAt(a)&1023),i.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63))}return i}return r(s)}})(),function(s){t.exports=s()}(function(){return n})})(Ns);var bi=Ns.exports;const wi=yi(bi);class Dn{constructor(e){ct(this,"_options"),ct(this,"_container"),ct(this,"_canvas"),ct(this,"_qr"),ct(this,"_drawingPromise"),this._options=e?Yn(Ne(Qn,e)):Qn,this.update()}static _clearContainer(e){e&&(e.innerHTML="")}update(e){Dn._clearContainer(this._container),this._options=e?Yn(Ne(this._options,e)):this._options,this._options.data&&(this._qr=wi(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||ci(this._options.data)),this._qr.make(),this._canvas=new vi(this._options),this._drawingPromise=this._canvas.drawQR(this._qr),this.append(this._container))}append(e){if(e){if(typeof e.appendChild!="function")throw"Container should be a single DOM node";this._canvas&&e.appendChild(this._canvas.getCanvas()),this._container=e}}async getImageUrl(e){return this._drawingPromise&&await this._drawingPromise===void 0&&this._canvas?this._canvas.getCanvas().toDataURL(`image/${e}`):""}download(e){this._drawingPromise&&this._drawingPromise.then(()=>{if(!this._canvas)return;const n=e,s=n.extension||"png",r=n.name||"qr",o=this._canvas.getCanvas().toDataURL(`image/${s}`);ui(o,`${r}.${s}`)})}}const _i=["src"],xi={key:1},ki=_s({__name:"QRCodeVue3Async",props:{value:{default:""},width:{default:300},height:{default:300},margin:{default:0},imgclass:{default:""},myclass:{default:""},downloadButton:{default:""},buttonName:{default:"Download"},qrOptions:{default:{typeNumber:0,mode:"Byte",errorCorrectionLevel:"Q"}},imageOptions:{default:{hideBackgroundDots:!0,imageSize:.4,margin:0}},dotsOptions:{default:{type:"dots",color:"#6a1a4c",gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#6a1a4c"},{offset:1,color:"#6a1a4c"}]}}},backgroundOptions:{default:{color:"#ffffff"}},cornersSquareOptions:{default:{type:"dot",color:"#000000"}},cornersDotOptions:{default:{type:void 0,color:"#000000"}},fileExt:{default:"png"},image:{default:""},download:{type:Boolean,default:!1},downloadOptions:{default:{name:"vqr",extension:"png"}}},async setup(t){let e,n;const s=t,r=new Dn({data:s.value,width:s.width,height:s.height,margin:s.margin,qrOptions:s.qrOptions,imageOptions:s.imageOptions,dotsOptions:s.dotsOptions,backgroundOptions:s.backgroundOptions,image:s.image,cornersSquareOptions:s.cornersSquareOptions,cornersDotOptions:s.cornersDotOptions});let o=([e,n]=Mo(()=>r.getImageUrl(s.fileExt)),e=await e,n(),e);function i(){r.download(s.downloadOptions)}return(a,c)=>(te(),We("div",null,[Ce(o)?(te(),We("div",{key:0,class:Wt(a.myclass)},[Ie("img",{src:Ce(o),class:Wt(a.imgclass),crossorigin:"anonymous"},null,10,_i)],2)):Hn("",!0),Ce(o)&&a.download?(te(),We("div",xi,[Ie("button",{onClick:i,class:Wt(a.downloadButton)},es(a.buttonName),3)])):Hn("",!0)]))}}),Ci=_s({__name:"QRCodeVue3",props:{value:{default:""},width:{default:300},height:{default:300},margin:{default:0},imgclass:{default:""},myclass:{default:""},downloadButton:{default:""},buttonName:{default:"Download"},qrOptions:{default:{typeNumber:0,mode:"Byte",errorCorrectionLevel:"Q"}},imageOptions:{default:{hideBackgroundDots:!0,imageSize:.4,margin:0}},dotsOptions:{default:{type:"dots",color:"#6a1a4c",gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#6a1a4c"},{offset:1,color:"#6a1a4c"}]}}},backgroundOptions:{default:{color:"#ffffff"}},cornersSquareOptions:{default:{type:"dot",color:"#000000"}},cornersDotOptions:{default:{type:void 0,color:"#000000"}},fileExt:{default:"png"},image:{default:""},download:{type:Boolean,default:!1},downloadOptions:{default:{name:"vqr",extension:"png"}}},setup(t){const e=t;return(n,s)=>(te(),Is(Vo,null,{default:lo(()=>[Et(ki,{"background-options":e.backgroundOptions,"button-name":e.buttonName,"corners-dot-options":e.cornersDotOptions,"corners-square-options":e.cornersSquareOptions,"dots-options":e.dotsOptions,download:e.download,"download-button":e.downloadButton,"download-options":e.downloadOptions,"file-ext":e.fileExt,height:e.height,image:e.image,"image-options":e.imageOptions,imgclass:e.imgclass,margin:e.margin,value:e.value,myclass:e.myclass,"qr-options":e.qrOptions,width:e.width},null,8,["background-options","button-name","corners-dot-options","corners-square-options","dots-options","download","download-button","download-options","file-ext","height","image","image-options","imgclass","margin","value","myclass","qr-options","width"])]),_:1}))}}),Si={class:"modal-header"},Mi={class:"modal-body"},Di={key:0,class:"mfa-enabled-view"},Pi={class:"action-buttons"},Oi={key:0,class:"disable-confirm"},Ti={class:"form-actions"},Ii=["disabled"],Ri={key:0,class:"fas fa-spinner fa-spin"},Bi={key:1,class:"mfa-setup-view"},Ai={key:0,class:"setup-intro"},Ni=["disabled"],Ei={key:0,class:"fas fa-spinner fa-spin"},$i={key:1,class:"setup-steps"},qi={class:"step"},zi={class:"step-content"},Ui={class:"qr-container"},Fi={class:"qr-code"},Li={class:"manual-setup"},ji={class:"secret-display"},Vi={class:"step"},Hi={class:"step-content"},Ji={class:"form-group"},Qi={key:0,class:"error-message"},Yi=["disabled"],Gi={key:0,class:"fas fa-spinner fa-spin"},Ki={key:2,class:"setup-complete"},Wi={key:0,class:"modal-footer"},Xi={__name:"MfaSetupDialog",props:{isEnabled:{type:Boolean,default:!1}},emits:["close","success"],setup(t,{emit:e}){const n=e,s=ot(!1),r=ot(null),o=ot(!1),i=ot(""),a=ot(""),c=ot(!1),S=async()=>{s.value=!0;try{const I=await wt("/api/auth/account-settings-api.php","generate_mfa_secret");I.status==="ok"&&I.mfa_secret?r.value={secret:I.mfa_secret,qr_url:`otpauth://totp/${encodeURIComponent("云幕监控")}:${encodeURIComponent(I.username)}?secret=${I.mfa_secret}&issuer=${encodeURIComponent("云幕监控")}`}:W.error(I.message||"MFA设置失败")}catch(I){console.error("MFA设置失败:",I),W.error("MFA设置失败")}finally{s.value=!1}},y=async()=>{try{await navigator.clipboard.writeText(r.value.secret),W.success("密钥已复制到剪贴板")}catch(I){console.error("复制失败:",I),W.error("复制失败，请手动复制")}},d=()=>{a.value="",i.value=i.value.replace(/\D/g,"")},f=async()=>{if(i.value.length!==6){a.value="请输入6位验证码";return}s.value=!0;try{const I=await wt("/api/auth/account-settings-api.php","verify_and_enable_mfa",{secret:r.value.secret,code:i.value});I.status==="ok"?(o.value=!0,W.success("双重认证启用成功"),setTimeout(()=>{n("success"),B()},2e3)):a.value=I.message||"验证码错误，请重试"}catch(I){console.error("MFA验证失败:",I),a.value="MFA验证失败，请重试"}finally{s.value=!1}},v=async()=>{s.value=!0;try{const I=await wt("/api/auth/account-settings-api.php","disable_mfa");I.status==="ok"?(W.success("双重认证已禁用"),n("success"),B()):W.error(I.message||"禁用失败")}catch(I){console.error("禁用MFA失败:",I),W.error("禁用MFA失败")}finally{s.value=!1}},B=()=>{n("close")};return(I,A)=>(U(),bt(qe,{to:"body"},[u("div",{class:"modal-overlay",onClick:B},[u("div",{class:"modal-content wide",onClick:A[3]||(A[3]=$e(()=>{},["stop"]))},[u("div",Si,[u("h3",null,Z(t.isEnabled?"管理双重认证":"启用双重认证"),1),u("button",{class:"modal-close",onClick:B},A[4]||(A[4]=[u("i",{class:"fas fa-times"},null,-1)]))]),u("div",Mi,[t.isEnabled?(U(),j("div",Di,[A[8]||(A[8]=u("div",{class:"status-info"},[u("div",{class:"status-icon enabled"},[u("i",{class:"fas fa-shield-alt"})]),u("div",{class:"status-text"},[u("h4",null,"双重认证已启用"),u("p",null,"您的账户受到双重认证保护")])],-1)),u("div",Pi,[u("button",{class:"modal-btn secondary",onClick:A[0]||(A[0]=X=>c.value=!0)},A[5]||(A[5]=[u("i",{class:"fas fa-times-circle"},null,-1),tt(" 禁用认证 ",-1)]))]),c.value?(U(),j("div",Oi,[A[7]||(A[7]=u("p",{class:"warning-text"},[u("i",{class:"fas fa-exclamation-triangle"}),tt(" 确定要禁用双重认证吗？禁用后您的账户安全性将降低。 ")],-1)),u("div",Ti,[u("button",{class:"modal-btn secondary",onClick:A[1]||(A[1]=X=>c.value=!1)},"取消"),u("button",{class:"modal-btn primary",disabled:s.value,onClick:v},[s.value?(U(),j("i",Ri)):V("",!0),A[6]||(A[6]=tt(" 确认禁用 ",-1))],8,Ii)])])):V("",!0)])):(U(),j("div",Bi,[r.value?V("",!0):(U(),j("div",Ai,[A[9]||(A[9]=u("div",{class:"intro-content"},[u("div",{class:"intro-header"},[u("div",{class:"intro-icon"},[u("i",{class:"fas fa-shield-alt"})]),u("h4",null,"保护您的账户安全")]),u("p",null," 双重认证为您的账户提供额外的安全保护。启用后，登录时需要输入手机应用生成的6位验证码。 "),u("div",{class:"app-recommendations"},[u("p",null,[u("strong",null,"推荐应用：")]),u("ul",null,[u("li",null,"Google Authenticator"),u("li",null,"Microsoft Authenticator"),u("li",null,"Authy")])])],-1)),u("button",{class:"modal-btn primary",onClick:S,disabled:s.value},[s.value?(U(),j("i",Ei)):V("",!0),tt(" "+Z(s.value?"生成中...":"开始设置"),1)],8,Ni)])),r.value&&!o.value?(U(),j("div",$i,[u("div",qi,[A[13]||(A[13]=u("div",{class:"step-header"},[u("div",{class:"step-number"},"1"),u("h5",null,"扫描二维码")],-1)),u("div",zi,[A[12]||(A[12]=u("p",null,"使用您的身份验证器应用扫描下方二维码：",-1)),u("div",Ui,[u("div",Fi,[r.value?.qr_url?(U(),bt(Fs(Ci),{key:0,value:r.value.qr_url,size:200,level:"M","render-as":"canvas",background:"#ffffff",foreground:"#000000"},null,8,["value"])):V("",!0)])]),u("div",Li,[A[11]||(A[11]=u("p",null,"或手动输入密钥：",-1)),u("div",ji,[u("code",null,Z(r.value.secret),1),u("button",{class:"copy-btn",onClick:y},A[10]||(A[10]=[u("i",{class:"fas fa-copy"},null,-1)]))])])])]),u("div",Vi,[A[15]||(A[15]=u("div",{class:"step-header"},[u("div",{class:"step-number"},"2"),u("h5",null,"输入验证码")],-1)),u("div",Hi,[A[14]||(A[14]=u("p",null,"输入身份验证器应用生成的6位验证码：",-1)),u("div",Ji,[Bt(u("input",{"onUpdate:modelValue":A[2]||(A[2]=X=>i.value=X),type:"text",class:"verification-input",placeholder:"000000",maxlength:"6",onInput:d},null,544),[[At,i.value]]),a.value?(U(),j("div",Qi,Z(a.value),1)):V("",!0)]),u("button",{class:"modal-btn primary",disabled:i.value.length!==6||s.value,onClick:f},[s.value?(U(),j("i",Gi)):V("",!0),tt(" "+Z(s.value?"验证中...":"验证并启用"),1)],8,Yi)])])])):V("",!0),o.value?(U(),j("div",Ki,A[16]||(A[16]=[u("div",{class:"success-icon"},[u("i",{class:"fas fa-check-circle"})],-1),u("h4",null,"双重认证启用成功！",-1),u("p",null,"您的账户现在受到双重认证保护。请妥善保存您的身份验证器应用。",-1)]))):V("",!0)]))]),!c.value&&!r.value?(U(),j("div",Wi,[u("button",{class:"modal-btn secondary",onClick:B},Z(o.value?"完成":"取消"),1)])):V("",!0)])])]))}},Zi=jt(Xi,[["__scopeId","data-v-5b2fddd1"]]),ta={class:"modal-body"},ea={key:0,class:"current-info"},na={class:"info-value"},sa={class:"form-group"},ra={key:0,class:"error-message"},oa={class:"modal-footer"},ia=["disabled"],aa={key:0,class:"fas fa-spinner fa-spin"},la={__name:"UsernameUpdateDialog",props:{currentUsername:{type:String,default:""}},emits:["close","success"],setup(t,{emit:e}){const n=t,s=e,r=ot(!1),o=ee({newUsername:""}),i=ee({newUsername:""}),a=f=>{const v=o[f];switch(f){case"newUsername":v.trim()?v.length<3||v.length>20?i[f]="账户名长度应为3-20位":/^[a-zA-Z0-9_]+$/.test(v)?v===n.currentUsername?i[f]="新账户名不能与当前账户名相同":i[f]="":i[f]="账户名只能包含字母、数字和下划线":i[f]="请输入新账户名";break}},c=f=>{i[f]&&(i[f]="")},S=Ee(()=>{const f=o.newUsername.trim(),v=!Object.values(i).some(B=>B!=="");return f&&v}),y=async()=>{if(Object.keys(o).forEach(f=>{a(f)}),!S.value){W.error("请检查输入内容");return}r.value=!0;try{const f=await wt("/api/auth/account-settings-api.php","update_username",{new_username:o.newUsername.trim()});f.status==="ok"?(W.success(f.message||"账户名修改成功"),s("success",o.newUsername.trim()),setTimeout(async()=>{try{await fetch("/api/auth/logout.php",{method:"POST",credentials:"include"})}catch(v){console.error("退出登录失败:",v)}window.location.href="/login"},1500),d()):W.error(f.message||"账户名修改失败")}catch(f){console.error("账户名修改失败:",f),W.error("账户名修改失败")}finally{r.value=!1}},d=()=>{s("close")};return(f,v)=>(U(),bt(qe,{to:"body"},[u("div",{class:"modal-overlay",onClick:d},[u("div",{class:"modal-content",onClick:v[3]||(v[3]=$e(()=>{},["stop"]))},[u("div",{class:"modal-header"},[v[5]||(v[5]=u("h3",null,"修改账户名",-1)),u("button",{class:"modal-close",onClick:d},v[4]||(v[4]=[u("i",{class:"fas fa-times"},null,-1)]))]),u("div",ta,[v[9]||(v[9]=u("div",{class:"warning-notice"},[u("div",{class:"warning-icon"},[u("i",{class:"fas fa-exclamation-triangle"})]),u("div",{class:"warning-text"},[u("h4",null,"重要提醒"),u("p",null," 修改账户名后，您的登录令牌将失效，系统会自动退出登录，需要使用新账户名重新登录。 ")])],-1)),t.currentUsername?(U(),j("div",ea,[v[6]||(v[6]=u("label",{class:"info-label"},"当前账户名",-1)),u("div",na,Z(t.currentUsername),1)])):V("",!0),u("div",sa,[v[7]||(v[7]=u("label",{class:"form-label"},"新账户名",-1)),Bt(u("input",{"onUpdate:modelValue":v[0]||(v[0]=B=>o.newUsername=B),type:"text",class:"form-input",placeholder:"请输入新账户名",onBlur:v[1]||(v[1]=B=>a("newUsername")),onInput:v[2]||(v[2]=B=>c("newUsername"))},null,544),[[At,o.newUsername]]),i.newUsername?(U(),j("div",ra,Z(i.newUsername),1)):V("",!0),v[8]||(v[8]=u("div",{class:"form-hint"},"账户名用于登录，建议使用字母、数字或下划线，长度3-20位",-1))])]),u("div",oa,[u("button",{class:"modal-btn secondary",onClick:d},"取消"),u("button",{class:"modal-btn primary",disabled:!S.value||r.value,onClick:y},[r.value?(U(),j("i",aa)):V("",!0),tt(" "+Z(r.value?"修改中...":"确认修改"),1)],8,ia)])])])]))}},ca=jt(la,[["__scopeId","data-v-e71d362a"]]),ua={class:"file-list-container"},da={class:"file-card"},fa={key:0,class:"loading-box"},ha={key:1,class:"profile-list"},ga={class:"profile-row"},pa={class:"row-value"},va={class:"profile-row"},ma={class:"row-value"},ya={key:0},ba={class:"profile-row"},wa={class:"row-value"},_a={__name:"Set-Account",setup(t){const e=ot(null),n=ot(!1),s=ot(!1),r=ot(!1),o=ot(!1),i=ot(!1),a=async()=>{try{const B=await wt("/api/auth/account-settings-api.php","get_info");B.status==="ok"?(e.value={username:B.username,email:B.email,mfa_enabled:B.mfa_enabled},i.value=!1):B.status==="visit_jwt_missing"||B.status==="visit_jwt_invalid"?(W.error(B.message||"访问令牌无效，请重新登录"),window.dispatchEvent(new CustomEvent("auth:login-required",{detail:{reason:B.status,message:B.message}}))):W.error(B.message||"获取用户信息失败")}catch(B){console.error("获取用户信息失败:",B),W.error("获取用户信息失败")}},c=()=>{o.value=!0},S=()=>{n.value=!0},y=()=>{s.value=!0},d=()=>{r.value=!0},f=()=>{a()},v=()=>{a()};return Gn(()=>{a()}),(B,I)=>(U(),j("div",ua,[u("div",da,[I[16]||(I[16]=u("div",{class:"card-header"},[u("h3",null,"账号设置")],-1)),e.value?(U(),j("div",ha,[u("div",ga,[I[7]||(I[7]=u("span",{class:"row-label"},"用户名：",-1)),u("span",pa,Z(e.value.username),1),u("button",{class:"action-btn small",onClick:c},I[6]||(I[6]=[u("i",{class:"fas fa-edit"},null,-1),tt(" 修改 ",-1)]))]),u("div",{class:"profile-row"},[I[9]||(I[9]=u("span",{class:"row-label"},"密码：",-1)),I[10]||(I[10]=u("span",{class:"row-value"},"******",-1)),u("button",{class:"action-btn small",onClick:S},I[8]||(I[8]=[u("i",{class:"fas fa-key"},null,-1),tt(" 修改 ",-1)]))]),u("div",va,[I[13]||(I[13]=u("span",{class:"row-label"},"邮箱：",-1)),u("span",ma,[i.value?(U(),j("span",ya,Z(e.value.email||"未设置"),1)):V("",!0),i.value?V("",!0):(U(),j("button",{key:1,class:"action-btn small",onClick:I[0]||(I[0]=A=>i.value=!0)},I[11]||(I[11]=[u("i",{class:"fas fa-eye"},null,-1),tt(" 显示邮箱 ",-1)])))]),i.value?(U(),j("button",{key:0,class:"action-btn small",onClick:y},I[12]||(I[12]=[u("i",{class:"fas fa-envelope"},null,-1),tt(" 修改 ",-1)]))):V("",!0)]),u("div",ba,[I[15]||(I[15]=u("span",{class:"row-label"},"二次验证：",-1)),u("span",wa,[u("span",{class:nn(["mfa-status",e.value.mfa_enabled?"enabled":"disabled"])},Z(e.value.mfa_enabled?"已启用":"未启用"),3)]),u("button",{class:"action-btn small",onClick:d},[I[14]||(I[14]=u("i",{class:"fas fa-shield-alt"},null,-1)),tt(" "+Z(e.value?.mfa_enabled?"管理":"启用"),1)])])])):(U(),j("div",fa,I[5]||(I[5]=[u("i",{class:"fas fa-circle-notch fa-spin"},null,-1),u("span",null,"加载中...",-1)]))),n.value?(U(),bt(or,{key:2,onClose:I[1]||(I[1]=A=>n.value=!1),onSuccess:f})):V("",!0),s.value?(U(),bt(pr,{key:3,"current-email":e.value?.email,onClose:I[2]||(I[2]=A=>s.value=!1),onSuccess:f},null,8,["current-email"])):V("",!0),r.value?(U(),bt(Zi,{key:4,"is-enabled":e.value?.mfa_enabled,onClose:I[3]||(I[3]=A=>r.value=!1),onSuccess:f},null,8,["is-enabled"])):V("",!0),o.value?(U(),bt(ca,{key:5,"current-username":e.value?.username,onClose:I[4]||(I[4]=A=>o.value=!1),onSuccess:v},null,8,["current-username"])):V("",!0)])]))}},xa=jt(_a,[["__scopeId","data-v-ba257aae"]]),ka={name:"SiteSettings",setup(){return{notification:js("notification")}},data(){return{siteConfigText:"",menuConfigText:"",originalSiteConfig:"",originalMenuConfig:"",saving:!1,siteLoading:!1,menuLoading:!1}},async mounted(){await this.loadSiteConfig(),await this.loadMenuConfig()},methods:{async loadSiteConfig(){this.siteLoading=!0;try{const t=await wt("/api/site.php","get_site_config");if(t.status==="ok"){const e=JSON.stringify(t.data,null,2);this.siteConfigText=e,this.originalSiteConfig=e}else this.showMessage(t.message||"加载站点配置失败","error")}catch(t){this.showMessage("加载站点配置失败: "+t.message,"error")}finally{this.siteLoading=!1}},async saveSiteConfig(){if(!this.siteConfigText.trim()){this.showMessage("配置内容不能为空","error");return}try{JSON.parse(this.siteConfigText)}catch(t){this.showMessage("JSON格式错误: "+t.message,"error");return}this.saving=!0;try{const t=await wt("/api/site.php","update_site_config",{config:this.siteConfigText});t.status==="ok"?(this.originalSiteConfig=this.siteConfigText,this.showMessage("站点配置保存成功","success"),window._siteConfigCache=null):this.showMessage(t.message||"保存失败","error")}catch(t){this.showMessage("保存失败: "+t.message,"error")}finally{this.saving=!1}},resetSiteConfig(){const t={siteName:"云幕监控",keywords:"多服务器监控，负载监控程序，服务器负载管理，实时监控系统，云幕监控",description:"云幕监控是一款多服务器监控、负载监控程序、服务器负载管理、实时监控系统，用于监控多台服务器的负载情况，及时发现问题，提高服务器的运行效率。",icp:"ICP备",securityRecord:"公网安备"};this.siteConfigText=JSON.stringify(t,null,2),this.showMessage("已重置为默认站点配置","success")},async loadMenuConfig(){this.menuLoading=!0;try{const t=await wt("/api/site.php","get_menu_config");if(t.status==="ok"){const e=JSON.stringify(t.data,null,2);this.menuConfigText=e,this.originalMenuConfig=e}else this.showMessage(t.message||"加载菜单配置失败","error")}catch(t){this.showMessage("加载菜单配置失败: "+t.message,"error")}finally{this.menuLoading=!1}},async saveMenuConfig(){if(!this.menuConfigText.trim()){this.showMessage("配置内容不能为空","error");return}try{JSON.parse(this.menuConfigText)}catch(t){this.showMessage("JSON格式错误: "+t.message,"error");return}this.saving=!0;try{const t=await wt("/api/site.php","update_menu_config",{config:this.menuConfigText});t.status==="ok"?(this.originalMenuConfig=this.menuConfigText,this.showMessage("菜单配置保存成功","success")):this.showMessage(t.message||"保存失败","error")}catch(t){this.showMessage("保存失败: "+t.message,"error")}finally{this.saving=!1}},resetMenuConfig(){const t=[{name:"首页",url:"/"},{name:"文档中心",url:"https://www.xcdream.com/home"},{name:"开源仓库",url:"https://www.xcdream.com/home"},{name:"用户社区",url:"https://www.xcdream.com/home"},{logo:"none"}];this.menuConfigText=JSON.stringify(t,null,2),this.showMessage("已重置为默认菜单配置","success")},showMessage(t,e="success"){this.notification?this.notification.open({title:e==="success"?"操作成功":"操作失败",message:t,type:e,duration:3e3}):console.log(`[${e.toUpperCase()}] ${t}`)}}},Ca={class:"site-settings-container"},Sa={class:"site-settings-card"},Ma={key:0,class:"loading-cell"},Da={key:1,class:"site-settings-section"},Pa={class:"site-config-editor"},Oa={class:"site-editor-actions"},Ta=["disabled"],Ia={class:"site-settings-card"},Ra={key:0,class:"loading-cell"},Ba={key:1,class:"site-settings-section"},Aa={class:"site-config-editor"},Na={class:"site-editor-actions"},Ea=["disabled"];function $a(t,e,n,s,r,o){return U(),j("div",Ca,[e[18]||(e[18]=Ls('<div class="site-settings-card" data-v-e4fe062b><div class="site-usage-title" data-v-e4fe062b><i class="fas fa-info-circle" data-v-e4fe062b></i> 使用说明 </div><div class="site-usage-content" data-v-e4fe062b><p data-v-e4fe062b>请注意：</p><ul data-v-e4fe062b><li data-v-e4fe062b> 本软件不提供直接部署的在线更新功能，推荐使用 <strong data-v-e4fe062b>Docker 容器</strong> 方式进行部署和升级。 </li><li data-v-e4fe062b> 本软件仅 <strong data-v-e4fe062b>PHP 后端 + Go 被控端</strong> 代码开源，前端 Vue 代码暂不开放，整体基于 <strong data-v-e4fe062b>Apache 2.0 协议</strong> 开源。 </li><li data-v-e4fe062b> 软件特色：极简配置，集成自研 <strong data-v-e4fe062b>StarUI v3 框架</strong>，无需复杂环境即可运行。 </li><li data-v-e4fe062b> 配置区域采用 <strong data-v-e4fe062b>JSON 样式</strong> 存储，请确保格式正确，修改后需点击“保存配置”按钮生效。 </li><li data-v-e4fe062b>如需恢复原始配置，可点击“重置”按钮。</li></ul></div><div class="site-usage-links" data-v-e4fe062b><a href="https://www.xcdream.com/ym" target="_blank" class="site-usage-link external" data-v-e4fe062b><i class="fas fa-globe" data-v-e4fe062b></i> 官网 </a><a href="https://github.com/defeatedperson/ym" target="_blank" class="site-usage-link external" data-v-e4fe062b><i class="fab fa-github" data-v-e4fe062b></i> 开源仓库 </a><a href="https://re.xcdream.com/9405.html" target="_blank" class="site-usage-link external" data-v-e4fe062b><i class="fas fa-book" data-v-e4fe062b></i> 文档中心 </a><a href="https://re.xcdream.com/links/qiafan" target="_blank" class="site-usage-link external" data-v-e4fe062b><i class="fas fa-heart" data-v-e4fe062b></i> 支持我们 </a></div></div>',1)),u("div",Sa,[e[12]||(e[12]=u("div",{class:"site-settings-header"},[u("h3",null,"站点信息")],-1)),r.siteLoading?(U(),j("div",Ma,e[8]||(e[8]=[u("i",{class:"fas fa-circle-notch fa-spin"},null,-1),u("span",null,"加载中...",-1)]))):(U(),j("div",Da,[u("div",Pa,[Bt(u("textarea",{"onUpdate:modelValue":e[0]||(e[0]=i=>r.siteConfigText=i),placeholder:"请输入站点配置JSON...",rows:"8",class:"site-json-editor"},null,512),[[At,r.siteConfigText]]),u("div",Oa,[u("button",{onClick:e[1]||(e[1]=(...i)=>o.resetSiteConfig&&o.resetSiteConfig(...i)),class:"batch-btn delete-btn"},e[9]||(e[9]=[u("i",{class:"fas fa-undo"},null,-1),tt(" 重置 ",-1)])),u("button",{onClick:e[2]||(e[2]=(...i)=>o.loadSiteConfig&&o.loadSiteConfig(...i)),class:"batch-btn"},e[10]||(e[10]=[u("i",{class:"fas fa-sync"},null,-1),tt(" 重新加载 ",-1)])),u("button",{onClick:e[3]||(e[3]=(...i)=>o.saveSiteConfig&&o.saveSiteConfig(...i)),class:"batch-btn",disabled:r.saving},[e[11]||(e[11]=u("i",{class:"fas fa-save"},null,-1)),tt(" "+Z(r.saving?"保存中...":"保存配置"),1)],8,Ta)])])]))]),u("div",Ia,[e[17]||(e[17]=u("div",{class:"site-settings-header"},[u("h3",null,"菜单配置")],-1)),r.menuLoading?(U(),j("div",Ra,e[13]||(e[13]=[u("i",{class:"fas fa-circle-notch fa-spin"},null,-1),u("span",null,"加载中...",-1)]))):(U(),j("div",Ba,[u("div",Aa,[Bt(u("textarea",{"onUpdate:modelValue":e[4]||(e[4]=i=>r.menuConfigText=i),placeholder:"请输入菜单配置JSON...",rows:"8",class:"site-json-editor"},null,512),[[At,r.menuConfigText]]),u("div",Na,[u("button",{onClick:e[5]||(e[5]=(...i)=>o.resetMenuConfig&&o.resetMenuConfig(...i)),class:"batch-btn delete-btn"},e[14]||(e[14]=[u("i",{class:"fas fa-undo"},null,-1),tt(" 重置 ",-1)])),u("button",{onClick:e[6]||(e[6]=(...i)=>o.loadMenuConfig&&o.loadMenuConfig(...i)),class:"batch-btn"},e[15]||(e[15]=[u("i",{class:"fas fa-sync"},null,-1),tt(" 重新加载 ",-1)])),u("button",{onClick:e[7]||(e[7]=(...i)=>o.saveMenuConfig&&o.saveMenuConfig(...i)),class:"batch-btn",disabled:r.saving},[e[16]||(e[16]=u("i",{class:"fas fa-save"},null,-1)),tt(" "+Z(r.saving?"保存中...":"保存配置"),1)],8,Ea)])])]))])])}const qa=jt(ka,[["render",$a],["__scopeId","data-v-e4fe062b"]]),za={class:"home-view"},Ua={class:"home"},Fa={key:0,class:"admin-switch"},La={class:"switch-tabs"},ja={__name:"Setting-View",setup(t){const e=ot("account"),n=ot(null),s=Ee(()=>n.value&&n.value.is_admin===!0);return Gn(async()=>{try{if(await Vs()){const o=Hs();n.value=o}}catch(r){console.error("用户信息获取失败:",r)}}),(r,o)=>(U(),j(Js,null,[u("div",za,[He(zs),He(qs)]),u("div",Ua,[s.value?(U(),j("div",Fa,[u("div",La,[u("button",{class:nn(["tab-btn",{active:e.value==="account"}]),onClick:o[0]||(o[0]=i=>e.value="account")},o[2]||(o[2]=[u("i",{class:"fas fa-user-cog"},null,-1),tt(" 账号设置 ",-1)]),2),u("button",{class:nn(["tab-btn",{active:e.value==="site"}]),onClick:o[1]||(o[1]=i=>e.value="site")},o[3]||(o[3]=[u("i",{class:"fas fa-cog"},null,-1),tt(" 站点配置 ",-1)]),2)])])):V("",!0),e.value==="account"?(U(),bt(xa,{key:1})):V("",!0),e.value==="site"?(U(),bt(qa,{key:2})):V("",!0)]),He(Us)],64))}},Ya=jt(ja,[["__scopeId","data-v-74ac480f"]]);export{Ya as default};
