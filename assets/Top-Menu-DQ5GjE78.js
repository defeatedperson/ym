import{C as F,O as H,J as W,r as d,m as h,K as $,o as j,a as q,c as i,b as l,w as k,d as K,v as b,e as s,F as D,f as U,n as t,t as u,P as Q,E as G,Q as z}from"./index-3rvIzVhp.js";import{_ as X}from"./Back-Ground-DNITIm_t.js";const M="/img/logo.png",Y={class:"top-menu-container"},Z={class:"desktop-menu"},ss={class:"menu-content"},es={class:"menu-left"},os={class:"menu-items"},ns=["onClick"],as={class:"menu-right"},ts={class:"user-details"},is={class:"user-name"},ls={class:"welcome-text"},rs={class:"user-avatar"},cs=["src"],ds={class:"mobile-top-bar"},us={class:"menu-content"},vs={class:"user-name"},ms={class:"user-avatar"},fs=["src"],ps={class:"sidebar-menu"},gs=["onClick"],ws=5e3,_s={__name:"Top-Menu",setup(hs){const p=F(),P=H(),A=W("confirm"),B=e=>{p.push(e),L()},C=e=>{e&&e.stopPropagation(),f(),A.open({title:"退出确认",message:"确定要退出登录吗？",confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:async()=>{try{await Q()&&G.success("已成功退出登录"),z(),window.location.href="/login"}catch(o){console.error("退出登录请求失败:",o),z(),window.location.href="/login"}}})},y=d([{name:"监控",path:"/monitor",icon:"fas fa-desktop"},{name:"节点",path:"/node",icon:"fas fa-network-wired"},{name:"更多",path:"/extra",icon:"fas fa-puzzle-piece"},{name:"设置",path:"/setting",icon:"fas fa-cog"}]);let v=null,T=0;const m=h(()=>{const e=Date.now();return v&&e-T<ws||(v={nickname:$()?.username||"游客",avatar:"/img/default-avatar.png"},T=e),v}),R=()=>{["/img/logo.png","/img/default-avatar.png"].forEach(o=>{const n=new Image;n.src=o})},J=h(()=>{const e=new Date().getHours();return e<6?"夜深了":e<9?"早上好":e<12?"上午好":e<14?"中午好":e<18?"下午好":e<22?"晚上好":"夜深了"}),r=d(!1),a=d(!1),c=d(!1),g=d(null),E=h(()=>P.path),x=e=>{e.stopPropagation(),c.value=!c.value},f=()=>{c.value=!1},I=e=>{if(g.value&&!g.value.contains(e.target)){const o=document.querySelector(".mobile-user-info");o&&!o.contains(e.target)?f():o||f()}},w=()=>{r.value=window.innerWidth<768,r.value||(a.value=!1)},O=()=>{a.value=!a.value,a.value?document.body.style.overflow="hidden":document.body.style.overflow=""},L=()=>{a.value=!1,document.body.style.overflow=""},V=e=>{p.push(e)},S=e=>{e&&e.stopPropagation(),f(),p.push("/settings")};return j(()=>{R(),w(),window.addEventListener("resize",w),document.addEventListener("click",I)}),q(()=>{window.removeEventListener("resize",w),document.removeEventListener("click",I)}),(e,o)=>(l(),i("div",Y,[k(s("div",Z,[s("div",ss,[s("div",es,[o[0]||(o[0]=s("div",{class:"logo-container"},[s("img",{src:M,alt:"Logo",class:"logo-image"})],-1)),s("div",os,[(l(!0),i(D,null,U(y.value,(n,_)=>(l(),i("div",{key:_,class:t(["menu-item",{active:E.value===n.path}]),onClick:N=>V(n.path)},[s("i",{class:t(n.icon)},null,2),s("span",null,u(n.name),1)],10,ns))),128))])]),s("div",as,[s("div",{class:"user-info",onClick:x,style:{cursor:"pointer"}},[s("div",ts,[s("div",is,u(m.value.nickname||"游客"),1),s("div",ls,u(J.value),1)]),s("div",{class:"custom-dropdown",ref_key:"dropdownRef",ref:g},[s("div",rs,[s("img",{src:m.value.avatar||"/img/default-avatar.png",alt:"Avatar"},null,8,cs)]),s("div",{class:t(["dropdown-menu",{show:c.value}])},[s("div",{class:"dropdown-item",onClick:S},o[1]||(o[1]=[s("i",{class:"fas fa-user-cog"},null,-1),s("span",null,"账号设置",-1)])),o[3]||(o[3]=s("div",{class:"dropdown-divider"},null,-1)),s("div",{class:"dropdown-item",onClick:C},o[2]||(o[2]=[s("i",{class:"fas fa-sign-out-alt"},null,-1),s("span",null,"退出登录",-1)]))],2)],512)])])])],512),[[b,!r.value]]),k(s("div",ds,[s("div",us,[s("div",{class:"menu-toggle",onClick:O},[s("i",{class:t(a.value?"fas fa-times":"fas fa-bars")},null,2)]),s("div",{class:"mobile-user-info",onClick:x,style:{cursor:"pointer"}},[s("div",vs,u(m.value.nickname||"游客"),1),s("div",ms,[s("img",{src:m.value.avatar||"/img/default-avatar.png",alt:"Avatar"},null,8,fs)]),s("div",{class:t(["dropdown-menu mobile-dropdown",{show:c.value}])},[s("div",{class:"dropdown-item",onClick:S},o[4]||(o[4]=[s("i",{class:"fas fa-user-cog"},null,-1),s("span",null,"账号设置",-1)])),o[6]||(o[6]=s("div",{class:"dropdown-divider"},null,-1)),s("div",{class:"dropdown-item",onClick:C},o[5]||(o[5]=[s("i",{class:"fas fa-sign-out-alt"},null,-1),s("span",null,"退出登录",-1)]))],2)])])],512),[[b,r.value]]),k(s("div",{class:t(["mobile-sidebar",{open:a.value}])},[o[7]||(o[7]=s("div",{class:"sidebar-logo"},[s("img",{src:M,alt:"Logo",class:"logo-image"})],-1)),s("div",ps,[(l(!0),i(D,null,U(y.value,(n,_)=>(l(),i("div",{key:_,class:t(["sidebar-menu-item",{active:E.value===n.path}]),onClick:N=>B(n.path)},[s("i",{class:t(n.icon)},null,2),s("span",null,u(n.name),1)],10,gs))),128))])],2),[[b,r.value]]),a.value?(l(),i("div",{key:0,class:"sidebar-overlay",onClick:L})):K("",!0)]))}},Cs=X(_s,[["__scopeId","data-v-14d297c2"]]);export{Cs as T};
