import{_ as B,B as N,F as P}from"./Back-Ground-DNITIm_t.js";import{r as g,o as M,a as j,c as r,b as u,w as S,d as L,v as U,e as s,F as x,f as F,t as i,n as z,g as E,h as C,i as I,j as H,k as T}from"./index-3rvIzVhp.js";const W={class:"top-menu-container"},A={class:"desktop-menu"},G={class:"menu-content"},O={class:"menu-left"},q={class:"logo-container"},J=["src"],K={class:"menu-items"},Q=["onClick"],R={class:"mobile-top-bar"},X={class:"menu-content"},Y={class:"sidebar-logo"},Z=["src"],ss={class:"sidebar-menu"},es=["onClick"],ts={__name:"Public-Menu",setup(V){const v=g([]),m=g("/img/logo.png"),p=g(!1),_=g(!1),d=g(!1),f=async()=>{if(!p.value){p.value=!0;try{const n=window.location.protocol,l=window.location.host,c=`${n}//${l}/api/data/menu.json`,h=await fetch(c);if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const y=await h.json();if(Array.isArray(y)){const D=y.filter($=>$.name&&$.url),k=y.find($=>$.logo!==void 0);v.value=D,k&&k.logo&&k.logo!=="none"?m.value=k.logo:m.value="/img/logo.png"}}catch(n){console.error("加载菜单配置失败:",n),v.value=[{name:"首页",url:"/"},{name:"文档中心",url:"https://xcdream.com/home"},{name:"开源仓库",url:"https://xcdream.com/home"},{name:"用户社区",url:"https://xcdream.com/home"}],m.value="/img/logo.png"}finally{p.value=!1}}},a=()=>{["/img/logo.png",m.value].forEach(l=>{if(l&&l!==m.value){const c=new Image;c.src=l}})},e=()=>{_.value=window.innerWidth<768,_.value||(d.value=!1)},t=()=>{d.value=!d.value,d.value?document.body.style.overflow="hidden":document.body.style.overflow=""},b=()=>{d.value=!1,document.body.style.overflow=""},w=n=>{n.startsWith("http://")||n.startsWith("https://")?window.open(n,"_blank"):window.location.href=n},o=()=>{window.location.href="/login"};return M(()=>{a(),f(),e(),window.addEventListener("resize",e)}),j(()=>{window.removeEventListener("resize",e)}),(n,l)=>(u(),r("div",W,[S(s("div",A,[s("div",G,[s("div",O,[s("div",q,[s("img",{src:m.value,alt:"Logo",class:"logo-image"},null,8,J)]),s("div",K,[(u(!0),r(x,null,F(v.value,(c,h)=>(u(),r("div",{key:h,class:"menu-item",onClick:y=>w(c.url)},[s("span",null,i(c.name),1)],8,Q))),128))])]),s("div",{class:"menu-right"},[s("div",{class:"login-button",onClick:o},l[0]||(l[0]=[s("i",{class:"fas fa-sign-in-alt"},null,-1),s("span",null,"登录",-1)]))])])],512),[[U,!_.value]]),S(s("div",R,[s("div",X,[s("div",{class:"menu-toggle",onClick:t},[s("i",{class:z(d.value?"fas fa-times":"fas fa-bars")},null,2)]),s("div",{class:"mobile-login",onClick:o},l[1]||(l[1]=[s("i",{class:"fas fa-sign-in-alt"},null,-1),s("span",null,"登录",-1)]))])],512),[[U,_.value]]),S(s("div",{class:z(["mobile-sidebar",{open:d.value}])},[s("div",Y,[s("img",{src:m.value,alt:"Logo",class:"logo-image"},null,8,Z)]),s("div",ss,[(u(!0),r(x,null,F(v.value,(c,h)=>(u(),r("div",{key:h,class:"sidebar-menu-item",onClick:()=>{w(c.url),b()}},[s("span",null,i(c.name),1)],8,es))),128))])],2),[[U,_.value]]),d.value?(u(),r("div",{key:0,class:"sidebar-overlay",onClick:b})):L("",!0)]))}},os=B(ts,[["__scopeId","data-v-6e615cad"]]),as={class:"home-view"},ns={class:"server-monitor-container"},is={class:"server-grid"},ls={key:0,class:"no-data-container"},ds={class:"server-header"},cs={class:"header-top"},rs={class:"server-name"},us={class:"update-time"},ms={class:"resource-item"},vs={class:"resource-label"},_s={class:"hardware-info cpu-model"},hs={class:"cpu-model-text"},ps={class:"resource-value"},gs={class:"progress-bar"},fs={class:"resource-item"},ws={class:"resource-label"},bs={class:"hardware-info"},ys={class:"resource-value"},ks={class:"progress-bar"},$s={class:"resource-item"},xs={class:"resource-label"},Ss={class:"hardware-info"},Us={class:"resource-value"},Cs={class:"progress-bar"},Ts={class:"resource-item"},Fs={class:"resource-details"},zs={class:"bandwidth-item"},Bs={class:"bandwidth-value"},Ms={class:"bandwidth-item"},Ls={class:"bandwidth-value"},Vs={__name:"Home-View",setup(V){const v=g([]),m=a=>new Date(a*1e3).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),p=a=>a>=1024*1024?`${(a/(1024*1024)).toFixed(2)} TB`:a>=1024?`${(a/1024).toFixed(2)} GB`:`${a.toFixed(2)} MB`,_=a=>{switch(a){case"online":return"在线";case"offline":return"离线";case"unknown":return"未知";default:return"离线"}},d=async()=>{try{const e=await(await fetch("/api/data/home.json")).json(),t=[],b=new Date;for(const w in e){const o=e[w];let n="offline";if(o.update_time){const l=new Date(o.update_time*1e3);n=(b-l)/(1e3*60)<=5?"online":"offline"}t.push({id:w,name:o.name,cpuModel:o.cpu_model,memorySize:o.memory_size,diskSize:o.disk_size,cpuUsage:o.cpu_usage,memoryUsage:o.memory_usage,diskUsage:o.disk_usage,uploadBandwidth:o.upload_bandwidth*8,downloadBandwidth:o.download_bandwidth*8,updateTime:o.update_time,status:n})}v.value=t}catch{}};let f=null;return M(()=>{d(),f=setInterval(d,3e4)}),E(()=>{f&&clearInterval(f)}),(a,e)=>(u(),r(x,null,[s("div",as,[C(N),C(os)]),s("div",ns,[e[7]||(e[7]=s("h1",{class:"page-title"},"服务器资源监控",-1)),s("div",is,[v.value.length===0?(u(),r("div",ls,e[0]||(e[0]=[I('<div class="no-data-icon" data-v-9c5e3063><i class="fas fa-server" data-v-9c5e3063></i></div><div class="no-data-title" data-v-9c5e3063>暂无节点信息</div><div class="no-data-subtitle" data-v-9c5e3063>系统中还没有添加任何监控节点</div><div class="no-data-hint" data-v-9c5e3063>请联系管理员添加节点或检查网络连接</div>',4)]))):L("",!0),(u(!0),r(x,null,F(v.value,t=>(u(),r("div",{key:t.id,class:"server-card"},[s("div",ds,[s("div",cs,[s("h2",rs,i(t.name),1),s("div",{class:z(["server-status",t.status])},[e[1]||(e[1]=s("span",{class:"status-indicator"},null,-1)),H(" "+i(_(t.status)),1)],2)]),s("div",us,"更新时间: "+i(m(t.updateTime)),1)]),s("div",ms,[s("div",vs,[e[2]||(e[2]=s("span",null,"CPU占用",-1)),s("span",_s,[s("span",hs,i(t.cpuModel),1)])]),s("div",ps,i(t.cpuUsage.toFixed(2))+"%",1),s("div",gs,[s("div",{class:"progress-fill cpu",style:T({width:t.cpuUsage+"%"})},null,4)])]),s("div",fs,[s("div",ws,[e[3]||(e[3]=s("span",null,"内存占用",-1)),s("span",bs,i(p(t.memorySize)),1)]),s("div",ys,i(t.memoryUsage.toFixed(2))+"%",1),s("div",ks,[s("div",{class:"progress-fill memory",style:T({width:t.memoryUsage+"%"})},null,4)])]),s("div",$s,[s("div",xs,[e[4]||(e[4]=s("span",null,"磁盘占用",-1)),s("span",Ss,i(p(t.diskSize)),1)]),s("div",Us,i(t.diskUsage.toFixed(2))+"%",1),s("div",Cs,[s("div",{class:"progress-fill disk",style:T({width:t.diskUsage+"%"})},null,4)])]),s("div",Ts,[s("div",Fs,[s("div",zs,[e[5]||(e[5]=s("span",{class:"bandwidth-label"},"上传:",-1)),s("span",Bs,i(t.uploadBandwidth.toFixed(2))+" Mbps",1)]),s("div",Ms,[e[6]||(e[6]=s("span",{class:"bandwidth-label"},"下载:",-1)),s("span",Ls,i(t.downloadBandwidth.toFixed(2))+" Mbps",1)])])])]))),128))])]),C(P)],64))}},Ps=B(Vs,[["__scopeId","data-v-9c5e3063"]]);export{Ps as default};
